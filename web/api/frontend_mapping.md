# ğŸ“‹ å‰ç«¯æ¨¡å—ä¸åç«¯è„šæœ¬æ˜ å°„è¯´æ˜

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ Web åº”ç”¨ä¸­å‰ç«¯æ¨¡å—ä¸åç«¯è„šæœ¬çš„å¯¹åº”å…³ç³»ã€æ¥å£è°ƒç”¨è§„åˆ™å’Œé…ç½®è¯´æ˜ã€‚

---

## ğŸ—‚ï¸ å‰ç«¯æ¨¡å—ç»“æ„

```
å‰ç«¯æ¨¡å— (Frontend Modules)
â”‚
â”œâ”€â”€ dashboard (ç›‘æ§ä»ªè¡¨æ¿)
â”‚   â”œâ”€â”€ ç»„ä»¶: çŠ¶æ€å¡ç‰‡ã€èµ„æºç›‘æ§ã€ç‰ˆæœ¬ä¿¡æ¯
â”‚   â””â”€â”€ API: /api/health, /api/project/status, /api/system/resources
â”‚
â”œâ”€â”€ scriptManager (è„šæœ¬ç®¡ç†å™¨)
â”‚   â”œâ”€â”€ ç»„ä»¶: è„šæœ¬åˆ—è¡¨ã€æ‰§è¡ŒæŒ‰é’®ã€çŠ¶æ€æ˜¾ç¤º
â”‚   â””â”€â”€ API: /api/scripts/list, /api/scripts/status
â”‚               /api/scripts/run/{name}, /api/scripts/stop/{name}
â”‚
â”œâ”€â”€ logViewer (æ—¥å¿—æŸ¥çœ‹å™¨)
â”‚   â”œâ”€â”€ ç»„ä»¶: æ—¥å¿—æ–‡æœ¬æ¡†ã€è¡Œå·æ˜¾ç¤ºã€æœç´¢è¿‡æ»¤
â”‚   â””â”€â”€ API: /api/logs/{script_name}
â”‚
â”œâ”€â”€ configEditor (é…ç½®ç¼–è¾‘å™¨)
â”‚   â”œâ”€â”€ ç»„ä»¶: é…ç½®è¡¨å•ã€JSON ç¼–è¾‘å™¨ã€ä¿å­˜æŒ‰é’®
â”‚   â””â”€â”€ API: /api/config/{component}, POST /api/config/{component}
â”‚
â””â”€â”€ deploymentTracker (éƒ¨ç½²è·Ÿè¸ª)
    â”œâ”€â”€ ç»„ä»¶: è¿›åº¦æ¡ã€çŠ¶æ€æ ‡ç­¾ã€å®Œæˆç™¾åˆ†æ¯”
    â””â”€â”€ API: /api/deployment/progress
```

---

## ğŸ”— å‰ç«¯æ¨¡å— â†” åç«¯è„šæœ¬æ˜ å°„è¡¨

### 1. ç›‘æ§ä»ªè¡¨æ¿ (Dashboard)

| å‰ç«¯ç»„ä»¶ | è°ƒç”¨æ¥å£ | åç«¯è„šæœ¬ | è¯´æ˜ |
|----------|----------|----------|------|
| çŠ¶æ€å¡ç‰‡ | GET /api/health | æ—  (å†…ç½®) | æ£€æŸ¥ Web æœåŠ¡å¥åº·çŠ¶æ€ |
| èµ„æºç›‘æ§ | GET /api/system/resources | æ—  (psutil) | ä½¿ç”¨ psutil è·å–ç³»ç»Ÿèµ„æº |
| ç‰ˆæœ¬ä¿¡æ¯ | GET /api/project/status | æ—  (å†…ç½®) | è¿”å›é¡¹ç›®æ•´ä½“çŠ¶æ€ |

**æ•°æ®æµ**:
```
å‰ç«¯ dashboard.vue
    â†“ HTTP GET
åç«¯ app.py (WebMonitorApp)
    â†“ å†…éƒ¨è°ƒç”¨
psutil / ç³»ç»Ÿ API
    â†“ JSON å“åº”
å‰ç«¯å±•ç¤º
```

### 2. è„šæœ¬ç®¡ç†å™¨ (ScriptManager)

| å‰ç«¯ç»„ä»¶ | è°ƒç”¨æ¥å£ | åç«¯è„šæœ¬ | å®é™…è„šæœ¬è·¯å¾„ |
|----------|----------|----------|--------------|
| è„šæœ¬åˆ—è¡¨ | GET /api/scripts/list | scripts_config.json | è¯»å–é…ç½®æ–‡ä»¶ |
| æ‰§è¡Œç›‘æ§ | GET /api/scripts/status | æ—  (å†…å­˜çŠ¶æ€) | è·Ÿè¸ªè¿è¡ŒçŠ¶æ€ |
| è¿è¡ŒæŒ‰é’® | POST /api/scripts/run/{name} | scripts/health_monitor/{name} | å¯åŠ¨å­è¿›ç¨‹æ‰§è¡Œ |
| åœæ­¢æŒ‰é’® | POST /api/scripts/stop/{name} | æ—  (å†…å­˜çŠ¶æ€) | æ›´æ–°å†…å­˜çŠ¶æ€ |

**å¯æ‰§è¡Œè„šæœ¬**:
- `health_monitor.py` - ä¸»å¥åº·ç›‘æ§
- `config_validator.py` - é…ç½®éªŒè¯
- `docs_sync_monitor.py` - æ–‡æ¡£åŒæ­¥
- `config_monitor.py` - é…ç½®ç›‘æ§
- `ui_interaction_monitor.py` - UI äº¤äº’ç›‘æ§

**æ•°æ®æµ**:
```
å‰ç«¯ ScriptManager.vue
    â†“ HTTP POST /api/scripts/run/health_monitor.py
åç«¯ app.py (run_script_async)
    â†“ subprocess.run()
Python è§£é‡Šå™¨
    â†“ æ‰§è¡Œ
scripts/health_monitor/health_monitor.py
    â†“ stdout/stderr
åç«¯æ•è·è¾“å‡º
    â†“ JSON å“åº”
å‰ç«¯æ›´æ–°çŠ¶æ€
```

### 3. æ—¥å¿—æŸ¥çœ‹å™¨ (LogViewer)

| å‰ç«¯ç»„ä»¶ | è°ƒç”¨æ¥å£ | åç«¯è„šæœ¬ | æ—¥å¿—è·¯å¾„ |
|----------|----------|----------|----------|
| æ—¥å¿—æ˜¾ç¤º | GET /api/logs/{name} | æ—  (æ–‡ä»¶è¯»å–) | logs/{name}.log |
| è¡Œæ•°æ§åˆ¶ | GET /api/logs/{name}?lines=100 | æ—  (æ–‡ä»¶åˆ‡ç‰‡) | æ”¯æŒè¡Œæ•°å‚æ•° |

**æ•°æ®æµ**:
```
å‰ç«¯ LogViewer.vue
    â†“ HTTP GET /api/logs/health_monitor?lines=100
åç«¯ app.py (get_script_logs)
    â†“ Path().read_text()
logs/health_monitor.log
    â†“ åˆ‡ç‰‡æœ€å100è¡Œ
JSON å“åº”
å‰ç«¯æ¸²æŸ“æ—¥å¿—
```

### 4. é…ç½®ç¼–è¾‘å™¨ (ConfigEditor)

| å‰ç«¯ç»„ä»¶ | è°ƒç”¨æ¥å£ | åç«¯è„šæœ¬ | é…ç½®æ–‡ä»¶ |
|----------|----------|----------|----------|
| è¯»å–é…ç½® | GET /api/config/{component} | æ—  (æ–‡ä»¶è¯»å–) | component_config.json |
| ä¿å­˜é…ç½® | POST /api/config/{component} | æ—  (æ–‡ä»¶å†™å…¥) | component_config.json |

**æ”¯æŒçš„ç»„ä»¶**:
- `project` â†’ project_config.json
- `frontend` â†’ src/frontend/frontend_config.json
- `backend` â†’ src/backend/backend_config.json
- `scripts` â†’ scripts/scripts_config.json

### 5. éƒ¨ç½²è·Ÿè¸ª (DeploymentTracker)

| å‰ç«¯ç»„ä»¶ | è°ƒç”¨æ¥å£ | åç«¯è„šæœ¬ | æ•°æ®æ¥æº |
|----------|----------|----------|----------|
| è¿›åº¦æ˜¾ç¤º | GET /api/deployment/progress | æ—  (æ–‡ä»¶è¯»å–) | docs/deployment_progress/ |

---

## ğŸ“Š é…ç½®è§„åˆ™è¯´æ˜

### å“åº”æ ¼å¼è§„åˆ™

æ‰€æœ‰ API å“åº”éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

**æˆåŠŸå“åº”**:
```json
{
    "status": "success",
    "data": { ... },
    "message": "æ“ä½œæˆåŠŸ",
    "timestamp": "2026-01-17T17:00:00.000000"
}
```

**é”™è¯¯å“åº”**:
```json
{
    "status": "error",
    "message": "é”™è¯¯æè¿°",
    "error": "è¯¦ç»†é”™è¯¯ä¿¡æ¯"
}
```

### ç¼“å­˜è§„åˆ™

| æ¥å£ç±»å‹ | ç¼“å­˜ TTL | è¯´æ˜ |
|----------|----------|------|
| GET /api/health | 0 | å®æ—¶æ£€æŸ¥ï¼Œä¸ç¼“å­˜ |
| GET /api/system/resources | 5ç§’ | èµ„æºä¿¡æ¯çŸ­æœŸç¼“å­˜ |
| GET /api/scripts/list | 60ç§’ | é…ç½®ä¿¡æ¯å¯ç¼“å­˜ |
| GET /api/project/status | 30ç§’ | çŠ¶æ€ä¿¡æ¯ä¸­æœŸç¼“å­˜ |
| GET /api/config/* | 300ç§’ | é…ç½®ä¿¡æ¯é•¿æœŸç¼“å­˜ |
| POST /api/scripts/* | 0 | æ“ä½œè¯·æ±‚ä¸ç¼“å­˜ |
| POST /api/config/* | 0 | å†™å…¥è¯·æ±‚ä¸ç¼“å­˜ |

### æƒé™è§„åˆ™

| æ¥å£ | è®¤è¯è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| GET /api/* | æ—  | æ‰€æœ‰æ¥å£å…¬å¼€è®¿é—® |
| POST /api/* | æ—  | å½“å‰ç‰ˆæœ¬æ— éœ€è®¤è¯ |

---

## ğŸ”„ æ¥å£è°ƒç”¨æµç¨‹å›¾

### å…¸å‹è„šæœ¬æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·ç‚¹å‡»"è¿è¡Œè„šæœ¬"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯: ScriptManager.vue                                     â”‚
â”‚  - ç¦ç”¨æŒ‰é’®ï¼Œæ˜¾ç¤ºåŠ è½½çŠ¶æ€                                     â”‚
â”‚  - å‘é€ POST è¯·æ±‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTP POST /api/scripts/run/health_monitor.py               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯: app.py (run_script è·¯ç”±)                              â”‚
â”‚  - æ›´æ–° script_status['running']                             â”‚
â”‚  - å¹¿æ’­ WebSocket çŠ¶æ€æ›´æ–°                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è„šæœ¬æ‰§è¡Œ: subprocess.run()                                  â”‚
â”‚  - python3 scripts/start_health_monitor.py --verbose        â”‚
â”‚  - æ•è· stdout/stderr                                        â”‚
â”‚  - è®¾ç½®è¶…æ—¶ (300ç§’)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»“æœå¤„ç†                                                    â”‚
â”‚  - æ›´æ–° script_status['completed'/'failed']                 â”‚
â”‚  - è®°å½•æœ€åè¿è¡Œæ—¶é—´                                           â”‚
â”‚  - å¹¿æ’­ WebSocket ç»“æœ                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯: æ¥æ”¶ WebSocket äº‹ä»¶                                   â”‚
â”‚  - æ›´æ–°è„šæœ¬çŠ¶æ€å¡ç‰‡                                           â”‚
â”‚  - æ˜¾ç¤ºæ‰§è¡Œç»“æœ                                              â”‚
â”‚  - å¯ç”¨æŒ‰é’®                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ¥å£é…ç½®ç¤ºä¾‹

### è„šæœ¬å®šä¹‰é…ç½® (scripts_config.json)

```json
{
    "health_monitor.py": {
        "name": "ä¸»å¥åº·ç›‘æ§",
        "description": "æ‰§è¡Œå…¨é¢çš„é¡¹ç›®å¥åº·æ£€æŸ¥",
        "execution": {
            "command": "python3 scripts/start_health_monitor.py",
            "frequency": "daily",
            "timeout": 300,
            "required": true
        },
        "dependencies": [],
        "outputs": ["health_report.json"]
    }
}
```

### API ç«¯ç‚¹é…ç½® (api_mapping.json)

```json
{
    "POST /api/scripts/run/{script_name}": {
        "name": "è¿è¡Œè„šæœ¬",
        "frontendModule": "scriptManager",
        "script": "scripts/health_monitor/{script_name}",
        "timeout": 300
    }
}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è„šæœ¬è·¯å¾„**: å®é™…è„šæœ¬å­˜å‚¨åœ¨ `scripts/health_monitor/` ç›®å½•
2. **æ‰§è¡Œæƒé™**: ç¡®ä¿è„šæœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™
3. **è¶…æ—¶è®¾ç½®**: é•¿æ—¶é—´è¿è¡Œçš„è„šæœ¬éœ€è¦è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´
4. **æ—¥å¿—ä½ç½®**: è„šæœ¬æ‰§è¡Œæ—¥å¿—ä¿å­˜åœ¨ `logs/` ç›®å½•
5. **çŠ¶æ€åŒæ­¥**: WebSocket ç”¨äºå®æ—¶çŠ¶æ€åŒæ­¥

---

*æœ€åæ›´æ–°: 2026-01-17*

