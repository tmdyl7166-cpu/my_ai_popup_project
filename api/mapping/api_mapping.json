{
    "meta": {
        "name": "AI弹窗项目API映射配置",
        "version": "1.0.0",
        "description": "统一API接口映射，将前端请求映射到后端处理逻辑",
        "created": "2026-01-21",
        "updated": "2026-01-21"
    },
    "mappings": {
        "system": {
            "status": {
                "endpoint": "/api/status",
                "method": "GET",
                "handler": "system_monitor.get_status",
                "description": "获取系统整体状态",
                "response_format": {
                    "cpu_percent": "number",
                    "memory_percent": "number",
                    "disk_percent": "number",
                    "services": "object",
                    "last_update": "string"
                }
            },
            "health": {
                "endpoint": "/api/health",
                "method": "GET",
                "handler": "health_monitor.check_health",
                "description": "系统健康检查",
                "response_format": {
                    "status": "string",
                    "timestamp": "string",
                    "services": "object",
                    "version": "string"
                }
            },
            "resources": {
                "endpoint": "/api/system/resources",
                "method": "GET",
                "handler": "system_monitor.get_resources",
                "description": "获取系统资源使用情况",
                "response_format": {
                    "cpu": "object",
                    "memory": "object",
                    "disk": "object",
                    "network": "object"
                }
            }
        },
        "projects": {
            "list": {
                "endpoint": "/api/projects",
                "method": "GET",
                "handler": "project_manager.list_projects",
                "description": "获取所有项目列表",
                "response_format": {
                    "projects": "array",
                    "total": "number",
                    "timestamp": "string"
                }
            },
            "detail": {
                "endpoint": "/api/projects/{id}",
                "method": "GET",
                "handler": "project_manager.get_project_detail",
                "description": "获取项目详细信息",
                "parameters": {
                    "id": {
                        "type": "string",
                        "required": true,
                        "description": "项目ID"
                    }
                },
                "response_format": {
                    "id": "string",
                    "name": "string",
                    "status": "string",
                    "type": "string",
                    "version": "string",
                    "description": "string",
                    "metrics": "object",
                    "last_update": "string"
                }
            },
            "action": {
                "endpoint": "/api/projects/{id}/action",
                "method": "POST",
                "handler": "project_manager.execute_action",
                "description": "执行项目操作",
                "parameters": {
                    "id": {
                        "type": "string",
                        "required": true,
                        "description": "项目ID"
                    },
                    "action": {
                        "type": "string",
                        "required": true,
                        "enum": [
                            "start",
                            "stop",
                            "restart",
                            "reload"
                        ],
                        "description": "执行的操作"
                    }
                },
                "request_body": {
                    "action": "string",
                    "parameters": "object"
                },
                "response_format": {
                    "success": "boolean",
                    "message": "string",
                    "timestamp": "string"
                }
            },
            "logs": {
                "endpoint": "/api/projects/{id}/logs",
                "method": "GET",
                "handler": "project_manager.get_logs",
                "description": "获取项目日志",
                "parameters": {
                    "id": {
                        "type": "string",
                        "required": true,
                        "description": "项目ID"
                    },
                    "lines": {
                        "type": "integer",
                        "default": 100,
                        "description": "返回的日志行数"
                    },
                    "level": {
                        "type": "string",
                        "enum": [
                            "DEBUG",
                            "INFO",
                            "WARNING",
                            "ERROR"
                        ],
                        "description": "日志级别过滤"
                    }
                },
                "response_format": {
                    "logs": "array",
                    "total_lines": "number",
                    "timestamp": "string"
                }
            },
            "metrics": {
                "endpoint": "/api/projects/{id}/metrics",
                "method": "GET",
                "handler": "project_manager.get_metrics",
                "description": "获取项目性能指标",
                "parameters": {
                    "id": {
                        "type": "string",
                        "required": true,
                        "description": "项目ID"
                    },
                    "period": {
                        "type": "string",
                        "default": "1h",
                        "enum": [
                            "5m",
                            "15m",
                            "1h",
                            "6h",
                            "24h"
                        ],
                        "description": "时间周期"
                    }
                },
                "response_format": {
                    "metrics": "object",
                    "period": "string",
                    "timestamp": "string"
                }
            }
        },
        "scripts": {
            "list": {
                "endpoint": "/api/scripts",
                "method": "GET",
                "handler": "script_manager.list_scripts",
                "description": "获取脚本列表",
                "response_format": {
                    "scripts": "array",
                    "total": "number",
                    "timestamp": "string"
                }
            },
            "run": {
                "endpoint": "/api/scripts/{name}/run",
                "method": "POST",
                "handler": "script_manager.run_script",
                "description": "运行指定脚本",
                "parameters": {
                    "name": {
                        "type": "string",
                        "required": true,
                        "description": "脚本名称"
                    }
                },
                "request_body": {
                    "parameters": "object",
                    "async": "boolean"
                },
                "response_format": {
                    "job_id": "string",
                    "status": "string",
                    "message": "string",
                    "timestamp": "string"
                }
            },
            "status": {
                "endpoint": "/api/scripts/{name}/status",
                "method": "GET",
                "handler": "script_manager.get_script_status",
                "description": "获取脚本运行状态",
                "parameters": {
                    "name": {
                        "type": "string",
                        "required": true,
                        "description": "脚本名称"
                    },
                    "job_id": {
                        "type": "string",
                        "description": "任务ID"
                    }
                },
                "response_format": {
                    "name": "string",
                    "status": "string",
                    "job_id": "string",
                    "start_time": "string",
                    "duration": "number",
                    "progress": "number"
                }
            },
            "stop": {
                "endpoint": "/api/scripts/{name}/stop",
                "method": "POST",
                "handler": "script_manager.stop_script",
                "description": "停止脚本运行",
                "parameters": {
                    "name": {
                        "type": "string",
                        "required": true,
                        "description": "脚本名称"
                    }
                },
                "request_body": {
                    "job_id": "string",
                    "force": "boolean"
                },
                "response_format": {
                    "success": "boolean",
                    "message": "string",
                    "timestamp": "string"
                }
            }
        },
        "logs": {
            "system": {
                "endpoint": "/api/logs",
                "method": "GET",
                "handler": "log_manager.get_system_logs",
                "description": "获取系统日志",
                "parameters": {
                    "lines": {
                        "type": "integer",
                        "default": 100,
                        "description": "返回的日志行数"
                    },
                    "level": {
                        "type": "string",
                        "enum": [
                            "DEBUG",
                            "INFO",
                            "WARNING",
                            "ERROR"
                        ],
                        "description": "日志级别过滤"
                    },
                    "service": {
                        "type": "string",
                        "description": "服务名称过滤"
                    },
                    "start_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "开始时间"
                    },
                    "end_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "结束时间"
                    }
                },
                "response_format": {
                    "logs": "array",
                    "total": "number",
                    "filtered": "number",
                    "timestamp": "string"
                }
            },
            "export": {
                "endpoint": "/api/logs/export",
                "method": "GET",
                "handler": "log_manager.export_logs",
                "description": "导出日志",
                "parameters": {
                    "format": {
                        "type": "string",
                        "default": "json",
                        "enum": [
                            "json",
                            "csv",
                            "txt"
                        ],
                        "description": "导出格式"
                    },
                    "start_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "开始时间"
                    },
                    "end_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "结束时间"
                    }
                },
                "response_format": {
                    "file_url": "string",
                    "file_size": "number",
                    "format": "string",
                    "timestamp": "string"
                }
            }
        },
        "config": {
            "get": {
                "endpoint": "/api/config",
                "method": "GET",
                "handler": "config_manager.get_config",
                "description": "获取配置信息",
                "parameters": {
                    "section": {
                        "type": "string",
                        "description": "配置节名称"
                    }
                },
                "response_format": {
                    "config": "object",
                    "timestamp": "string"
                }
            },
            "update": {
                "endpoint": "/api/config",
                "method": "PUT",
                "handler": "config_manager.update_config",
                "description": "更新配置",
                "request_body": {
                    "section": "string",
                    "config": "object"
                },
                "response_format": {
                    "success": "boolean",
                    "message": "string",
                    "timestamp": "string"
                }
            },
            "validate": {
                "endpoint": "/api/config/validate",
                "method": "POST",
                "handler": "config_manager.validate_config",
                "description": "验证配置",
                "request_body": {
                    "config": "object"
                },
                "response_format": {
                    "valid": "boolean",
                    "errors": "array",
                    "warnings": "array",
                    "timestamp": "string"
                }
            }
        },
        "plugins": {
            "list": {
                "endpoint": "/api/plugins",
                "method": "GET",
                "handler": "plugin_manager.list_plugins",
                "description": "获取插件列表",
                "response_format": {
                    "plugins": "array",
                    "total": "number",
                    "timestamp": "string"
                }
            },
            "status": {
                "endpoint": "/api/plugins/{id}/status",
                "method": "GET",
                "handler": "plugin_manager.get_plugin_status",
                "description": "获取插件状态",
                "parameters": {
                    "id": {
                        "type": "string",
                        "required": true,
                        "description": "插件ID"
                    }
                },
                "response_format": {
                    "id": "string",
                    "name": "string",
                    "status": "string",
                    "version": "string",
                    "description": "string",
                    "metrics": "object"
                }
            },
            "control": {
                "endpoint": "/api/plugins/{id}/control",
                "method": "POST",
                "handler": "plugin_manager.control_plugin",
                "description": "控制插件",
                "parameters": {
                    "id": {
                        "type": "string",
                        "required": true,
                        "description": "插件ID"
                    }
                },
                "request_body": {
                    "action": "string",
                    "parameters": "object"
                },
                "response_format": {
                    "success": "boolean",
                    "message": "string",
                    "timestamp": "string"
                }
            }
        }
    },
    "middleware": {
        "auth": {
            "enabled": false,
            "type": "bearer",
            "token_header": "Authorization"
        },
        "cors": {
            "enabled": true,
            "origins": [
                "*"
            ],
            "methods": [
                "GET",
                "POST",
                "PUT",
                "DELETE",
                "OPTIONS"
            ],
            "headers": [
                "*"
            ]
        },
        "rate_limit": {
            "enabled": true,
            "requests_per_minute": 60,
            "burst_limit": 10
        },
        "logging": {
            "enabled": true,
            "level": "INFO",
            "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
        }
    },
    "error_responses": {
        "400": {
            "description": "请求参数错误",
            "schema": {
                "error": "string",
                "message": "string",
                "timestamp": "string"
            }
        },
        "401": {
            "description": "未授权访问",
            "schema": {
                "error": "string",
                "message": "string",
                "timestamp": "string"
            }
        },
        "403": {
            "description": "禁止访问",
            "schema": {
                "error": "string",
                "message": "string",
                "timestamp": "string"
            }
        },
        "404": {
            "description": "资源不存在",
            "schema": {
                "error": "string",
                "message": "string",
                "timestamp": "string"
            }
        },
        "500": {
            "description": "服务器内部错误",
            "schema": {
                "error": "string",
                "message": "string",
                "timestamp": "string"
            }
        }
    }
}