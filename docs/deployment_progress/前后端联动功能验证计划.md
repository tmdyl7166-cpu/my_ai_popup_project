# 前后端联动功能验证计划

## 文档信息

- **创建时间**: 2026-01-19
- **任务类型**: 前后端联动功能验证
- **项目路径**: /home/vboxuser/桌面/BX/HC/my_ai_popup_project

---

## 一、验证目标

### 1.1 核心交互点验证

| 交互点    | 描述                 | 验证方式     |
| --------- | -------------------- | ------------ |
| 顶部导航  | 导航栏点击响应       | 页面点击测试 |
| 侧边菜单  | 分组菜单触发模块渲染 | 菜单交互测试 |
| 按钮请求  | fetch请求与响应显示  | API调用测试  |
| 仪表盘KPI | 数值动态刷新         | 数据更新测试 |

### 1.2 WebSocket 实时通信验证

| 组件        | 功能         | 验证方式     |
| ----------- | ------------ | ------------ |
| ws.js       | 任务进度订阅 | WS连接测试   |
| monitor.js  | 实时状态监控 | 数据流测试   |
| charting.js | 图表渲染     | 图表显示测试 |
| progress.js | 进度条更新   | 进度动画测试 |
| spinner.js  | 加载动画     | 加载状态测试 |
| toast.js    | 通知提示     | 冒泡通知测试 |

### 1.3 表单提交流程验证

```javascript
// 验证流程
1. 监听 #runForm 提交事件
2. 提取 name 与 params (JSON格式)
3. 调用 POST /api/run
4. 响应数据写入 #result 显示
```

---

## 二、功能模块卡片验证清单

### 2.1 卡片必须显示内容

```
✅ 冒泡检测状态
✅ 定义的前端功能名称
✅ 一句话自然语言功能说明
✅ 输入参数区域（动态生成）
✅ 后端预留节点
✅ 优化建议
✅ 功能标签（AI / API / 脚本 / DAG）
✅ 状态标识（🟢 可用 / 🟡 部分完成 / 🔴 未部署）
✅ 操作按钮（启动任务、查看说明）
```

### 2.2 模块列表与状态

| 序号 | 模块名称     | 前端文件                  | 后端API                  | 状态    | 优先级 |
| ---- | ------------ | ------------------------- | ------------------------ | ------- | ------ |
| 1    | 全局监控     | globalMonitor.js          | /api/project/status      | 🟢 可用 | P0     |
| 2    | 部署进度     | deploymentProgress.js     | /api/deployment/progress | 🟢 可用 | P0     |
| 3    | 模块状态     | moduleStatus.js           | /api/project/status      | 🟢 可用 | P0     |
| 4    | 脚本控制     | scriptControl.js          | /api/scripts/\*          | 🟢 可用 | P0     |
| 5    | 配置管理     | configManagement.js       | /api/config/\*           | 🟢 可用 | P1     |
| 6    | 日志查看     | logsViewer.js             | /api/logs/\*             | 🟢 可用 | P1     |
| 7    | GPU监控      | gpuMonitor.js             | /api/system/gpu          | 🟢 可用 | P0     |
| 8    | 性能监控     | performanceMonitor.js     | /api/performance/\*      | 🟢 可用 | P1     |
| 9    | 审计日志     | auditLogger.js            | /api/audit/\*            | 🟢 可用 | P1     |
| 10   | 测试运行     | testRunner.js             | /api/tests/\*            | 🟢 可用 | P2     |
| 11   | 冒泡监测     | bubbleMonitor.js          | /api/bubbles             | 🟢 可用 | P0     |
| 12   | 端口映射     | portMapping.js            | /api/ports               | 🟢 可用 | P2     |
| 13   | 子项目监控   | subProjectMonitor.js      | /api/subprojects         | 🟢 可用 | P1     |
| 14   | 脚本运行     | scriptRunner.js           | /api/scripts/\*          | 🟢 可用 | P1     |
| 15   | 视频流监控   | videoStreamMonitor.js     | /api/video/\*            | 🟢 可用 | P1     |
| 16   | 备份恢复     | backupRecoveryMonitor.js  | /api/backup/\*           | 🟢 可用 | P2     |
| 17   | API接口      | apiInterface.js           | 全局API封装              | 🟢 可用 | P0     |
| 18   | WebSocket    | websocketManager.js       | /ws/monitoring           | 🟢 可用 | P0     |
| 19   | 模态框       | modalManager.js           | -                        | 🟢 可用 | P0     |
| 20   | 通知         | notifications.js          | -                        | 🟢 可用 | P0     |
| 21   | 全局操作     | globalActions.js          | -                        | 🟢 可用 | P0     |
| 22   | 摄像头管理   | cameraManager.js          | /api/video/cameras       | 🟡 部分 | P2     |
| 23   | 虚拟摄像头   | virtualCameraSelector.js  | -                        | 🟡 部分 | P2     |
| 24   | 图像识别配置 | imageRecognitionConfig.js | -                        | 🟡 部分 | P2     |

---

## 三、后端API验证清单

### 3.1 核心API端点

| 端点                           | 方法      | 功能       | 验证状态 |
| ------------------------------ | --------- | ---------- | -------- |
| /api/health                    | GET       | 健康检查   | 待验证   |
| /api/project/status            | GET       | 项目状态   | 待验证   |
| /api/scripts/list              | GET       | 脚本列表   | 待验证   |
| /api/scripts/status            | GET       | 脚本状态   | 待验证   |
| /api/scripts/run/{name}        | POST      | 执行脚本   | 待验证   |
| /api/system/resources          | GET       | 系统资源   | 待验证   |
| /api/system/gpu                | GET       | GPU资源    | 待验证   |
| /api/ports                     | GET       | 端口状态   | 待验证   |
| /api/subprojects               | GET       | 子项目     | 待验证   |
| /api/bubbles                   | GET       | 冒泡数据   | 待验证   |
| /api/deployment/progress       | GET       | 部署进度   | 待验证   |
| /api/config/{component}        | GET/POST  | 配置管理   | 待验证   |
| /api/logs/{script_name}        | GET       | 日志查看   | 待验证   |
| /api/audit/logs                | GET       | 审计日志   | 待验证   |
| /api/audit/export              | GET       | 日志导出   | 待验证   |
| /api/performance               | GET       | 性能概览   | 待验证   |
| /api/performance/metrics       | GET       | 性能指标   | 待验证   |
| /api/performance/optimize      | POST      | 性能优化   | 待验证   |
| /api/video                     | GET       | 视频概览   | 待验证   |
| /api/video/cameras             | GET       | 摄像头列表 | 待验证   |
| /api/video/streams             | GET       | 视频流     | 待验证   |
| /api/video/engines             | GET       | 引擎状态   | 待验证   |
| /api/backup                    | GET       | 备份列表   | 待验证   |
| /api/backup/create             | POST      | 创建备份   | 待验证   |
| /api/engines                   | GET       | 引擎管理   | 待验证   |
| /api/engines/{name}/initialize | POST      | 初始化引擎 | 待验证   |
| /api/engines/{name}/shutdown   | POST      | 关闭引擎   | 待验证   |
| /ws/monitoring                 | WebSocket | 实时监控   | 待验证   |

---

## 四、联动功能验证步骤

### 4.1 第一步：启动服务

```bash
# 启动 Web 监控中心
cd /home/vboxuser/桌面/BX/HC/my_ai_popup_project
python web/app.py --host 0.0.0.0 --port 8080

# 验证服务状态
curl http://localhost:8080/api/health
```

### 4.2 第二步：验证前端加载

1. 打开浏览器访问 http://localhost:8080
2. 检查控制台是否有 JS 错误
3. 验证所有模块是否正常初始化

### 4.3 第三步：验证交互功能

1. **导航测试**
   - 点击顶部导航按钮
   - 观察侧边菜单响应

2. **菜单测试**
   - 点击侧边菜单项
   - 验证对应模块渲染

3. **按钮测试**
   - 点击刷新按钮
   - 验证数据更新

4. **表单测试**
   - 填写表单参数
   - 提交并验证响应

### 4.4 第四步：验证实时通信

1. **WebSocket 连接**
   - 打开浏览器开发者工具
   - 检查 WS 连接状态

2. **冒泡通知**
   - 触发告警事件
   - 验证冒泡显示

3. **图表渲染**
   - 验证 Chart.js 图表
   - 检查数据更新

---

## 五、验证结果记录模板

### 5.1 验证检查表

```
[ ] 服务启动成功
[ ] 页面加载正常
[ ] 模块初始化完成
[ ] API调用正常
[ ] WebSocket连接成功
[ ] 冒泡通知正常
[ ] 图表渲染正常
[ ] 表单提交正常
[ ] 数据更新正常
```

### 5.2 问题记录模板

| 问题编号 | 模块 | 问题描述 | 严重程度 | 状态   |
| -------- | ---- | -------- | -------- | ------ |
| BUG-001  | -    | -        | -/-/-    | 待修复 |

---

## 六、冒泡检测验证

### 6.1 检测类型

- **成功冒泡**: 操作成功确认
- **错误冒泡**: 系统错误告警
- **警告冒泡**: 阈值告警提示
- **信息冒泡**: 一般通知

### 6.2 验证场景

| 场景         | 触发条件     | 预期结果         |
| ------------ | ------------ | ---------------- |
| GPU温度过高  | 温度 > 85°C  | 显示红色错误冒泡 |
| 内存使用过高 | 使用率 > 80% | 显示黄色警告冒泡 |
| 操作成功     | 任务完成     | 显示绿色成功冒泡 |
| 新连接       | 客户端连接   | 显示蓝色信息冒泡 |

---

## 七、优化建议收集

### 7.1 功能优化

| 模块 | 建议内容 | 优先级 |
| ---- | -------- | ------ |
| -    | -        | -/-/-  |

### 7.2 性能优化

| 模块 | 建议内容 | 优先级 |
| ---- | -------- | ------ |
| -    | -        | -/-/-  |

### 7.3 用户体验

| 模块 | 建议内容 | 优先级 |
| ---- | -------- | ------ |
| -    | -        | -/-/-  |

---

_文档更新时间: 2026-01-19_
_版本: 1.0.0_
