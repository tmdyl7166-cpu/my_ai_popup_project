# é¡¹ç›®ä¾èµ–å’Œé…ç½®è¯´æ˜

> æœ¬æ–‡æ¡£æè¿°å¤œçµARå¤šåŠŸèƒ½åˆæˆè½¯ä»¶çš„ä¾èµ–ç®¡ç†å’Œé…ç½®ç³»ç»Ÿã€‚

## ğŸ“¦ ä¾èµ–ç®¡ç†

### Python ç¯å¢ƒè¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| Python ç‰ˆæœ¬ | 3.10.0 - 3.11.9 (æ¨è 3.10.12) |
| æ“ä½œç³»ç»Ÿ | Windows 10+, Ubuntu 20.04+, macOS 12+ |
| å†…å­˜ | 8GB+ (æ¨è 16GB) |
| å­˜å‚¨ | 20GB+ å¯ç”¨ç©ºé—´ |
| GPU | CUDAå…¼å®¹GPU (å¯é€‰ï¼Œæ¨è 4GB+ VRAM) |

### æ ¸å¿ƒä¾èµ–

#### æ ¸å¿ƒæ¡†æ¶

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| PyQt5 | >=5.15.10 | GUIæ¡†æ¶ |
| PyQt5-sip | >=12.13.1 | PyQt5 SIPç»‘å®š |
| fastapi | >=0.120.0 | Webæ¡†æ¶ |
| uvicorn | >=0.30.0 | ASGIæœåŠ¡å™¨ |
| python-multipart | >=0.0.6 | å¤šéƒ¨åˆ†è¡¨å•æ•°æ® |
| pydantic | >=2.10.0 | æ•°æ®éªŒè¯ |
| pydantic-settings | >=2.5.0 | è®¾ç½®ç®¡ç† |

#### Web ç›¸å…³

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| jinja2 | >=3.1.4 | æ¨¡æ¿å¼•æ“ |
| aiofiles | >=24.0.0 | å¼‚æ­¥æ–‡ä»¶æ“ä½œ |
| websockets | >=14.0 | WebSocketæ”¯æŒ |
| python-socketio | >=5.12.0 | Socket.IOå®¢æˆ·ç«¯ |
| schedule | >=1.2.2 | ä»»åŠ¡è°ƒåº¦ |

#### AI ç›¸å…³

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| torch | >=2.5.0 | æ·±åº¦å­¦ä¹ æ¡†æ¶ |
| torchvision | >=0.20.0 | PyTorchè§†è§‰åº“ |
| torchaudio | >=2.5.0 | PyTorchéŸ³é¢‘åº“ |
| ollama | >=0.3.0 | æœ¬åœ°LLMæ¨ç† |
| insightface | 0.7.3 | äººè„¸åˆ†æ |
| face-recognition | >=1.3.0 | äººè„¸è¯†åˆ« |
| dlib | >=19.24.0 | äººè„¸ç‰¹å¾ç‚¹æ£€æµ‹ |
| deepface | >=0.0.90 | æ·±åº¦äººè„¸åˆ†æ |
| mediapipe | >=0.10.15 | é¢éƒ¨ç½‘æ ¼æ£€æµ‹ |
| onnxruntime | >=1.17.0 | æ¨ç†åŠ é€Ÿ |

#### åª’ä½“å¤„ç†

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| opencv-python | >=4.10.0 | å›¾åƒ/è§†é¢‘å¤„ç† |
| opencv-python-headless | >=4.10.0 | OpenCVæ— å¤´ç‰ˆæœ¬ |
| Pillow | >=11.0.0 | å›¾åƒå¤„ç† |
| numpy | >=1.24.0,<2.0.0 | æ•°å€¼è®¡ç®— |
| scipy | >=1.14.0 | ç§‘å­¦è®¡ç®— |
| imageio | >=2.36.0 | å›¾åƒI/O |
| moviepy | >=2.0.0 | è§†é¢‘ç¼–è¾‘ |
| imageio-ffmpeg | >=0.5.0 | FFmpegç»‘å®š |

#### å·¥å…·ç±»

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| psutil | >=6.1.0 | ç³»ç»Ÿç›‘æ§ |
| loguru | >=0.7.3 | æ—¥å¿—è®°å½• |
| colorlog | >=6.9.0 | å½©è‰²æ—¥å¿— |
| python-dotenv | >=1.0.1 | ç¯å¢ƒå˜é‡ |
| pyyaml | >=6.0.2 | YAMLè§£æ |
| watchdog | >=6.0.0 | æ–‡ä»¶ç›‘æ§ |

### å¯é€‰ä¾èµ–

#### GPU åŠ é€Ÿ

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| torch-cuda | >=2.5.0+cu121 | CUDAæ”¯æŒPyTorch |
| torch-directml | >=0.2.5 | DirectMLæ”¯æŒ |
| onnxruntime-gpu | >=1.20.0 | GPUæ¨ç†åŠ é€Ÿ |

#### å¼€å‘å·¥å…·

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| pytest | >=8.3.0 | æµ‹è¯•æ¡†æ¶ |
| pytest-asyncio | >=0.25.0 | å¼‚æ­¥æµ‹è¯• |
| black | >=25.0.0 | ä»£ç æ ¼å¼åŒ– |
| mypy | >=1.12.0 | ç±»å‹æ£€æŸ¥ |

## âš™ï¸ é…ç½®ç®¡ç†

### é…ç½®æ–‡ä»¶å±‚æ¬¡

```
my_ai_popup_project/
â”œâ”€â”€ project_config.json          # é¡¹ç›®å…¨å±€é…ç½® â­
â”‚
â”œâ”€â”€ rules/                       # è§„åˆ™é…ç½®
â”‚   â”œâ”€â”€ L1-meta-goal.json       # å…ƒç›®æ ‡å±‚
â”‚   â”œâ”€â”€ L2-understanding.json   # å…¨å±€ç†è§£å±‚
â”‚   â”œâ”€â”€ L3-constraints.json     # çº¦æŸå±‚
â”‚   â”œâ”€â”€ L4-decisions.json       # å†³ç­–å±‚
â”‚   â”œâ”€â”€ L5-execution.json       # æ‰§è¡Œå±‚
â”‚   â””â”€â”€ rules.config.json       # è§„åˆ™ç³»ç»Ÿé…ç½® â­
â”‚
â”œâ”€â”€ src/                         # æºç é…ç½®
â”‚   â”œâ”€â”€ src_config.json         # æºç æ¨¡å—é…ç½®
â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â””â”€â”€ frontend_config.json
â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â””â”€â”€ backend_config.json
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â””â”€â”€ ai_config.json
â”‚   â”œâ”€â”€ processing/
â”‚   â”‚   â””â”€â”€ processing_config.json
â”‚   â”œâ”€â”€ integrations/
â”‚   â”‚   â””â”€â”€ integrations_config.json
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ utils_config.json
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ config_config.json
â”‚
â”œâ”€â”€ api/                         # APIé…ç½®
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ api_config.json     # APIé…ç½® â­
â”‚   â”œâ”€â”€ mapping/
â”‚   â”‚   â”œâ”€â”€ api_mapping.json    # APIæ˜ å°„ â­
â”‚   â”‚   â””â”€â”€ api_mapping.md
â”‚   â””â”€â”€ frontend/
â”‚       â””â”€â”€ api.js
â”‚
â”œâ”€â”€ scripts/                     # è„šæœ¬é…ç½®
â”‚   â”œâ”€â”€ scripts_config.json     # è„šæœ¬é…ç½® â­
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ web/                         # Webé…ç½®
â”‚   â”œâ”€â”€ web_config.json         # Webé…ç½® â­
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ assets/                      # èµ„æºç›®å½•é…ç½®
â”‚   â””â”€â”€ assets_config.json
â”‚
â””â”€â”€ requirements.txt             # Pythonä¾èµ–æ¸…å•
```

### æ ¸å¿ƒé…ç½®è¯´æ˜

#### project_config.json

```json
{
  "meta": { ... },
  "project": {
    "name": "å¤œçµARå¤šåŠŸèƒ½åˆæˆè½¯ä»¶",
    "rootPath": "."
  },
  "deployment": {
    "paths": {
      "projectRoot": "./my_ai_popup_project",
      "sourceCode": "./src",
      "assets": "./assets",
      "config": "./rules",
      "output": "./output",
      "logs": "./logs"
    },
    "entryPoints": { ... },
    "environments": {
      "development": { "debug": true, "logLevel": "DEBUG" },
      "staging": { "debug": false, "logLevel": "INFO" },
      "production": { "debug": false, "logLevel": "WARNING" }
    }
  },
  "rules": { ... },
  "validation": { ... },
  "monitoring": { ... },
  "logging": { ... }
}
```

#### rules/rules.config.json

```json
{
  "layers": {
    "L1-meta-goal": { "file": "L1-meta-goal.json", "required": true },
    "L2-understanding": { "file": "L2-understanding.json", "required": true },
    "L3-constraints": { "file": "L3-constraints.json", "required": true },
    "L4-decisions": { "file": "L4-decisions.json", "required": true },
    "L5-execution": { "file": "L5-execution.json", "required": true }
  },
  "dependencies": {
    "L1": [],
    "L2": ["L1"],
    "L3": ["L1", "L2"],
    "L4": ["L1", "L2", "L3"],
    "L5": ["L1", "L2", "L3", "L4"]
  },
  "validation": {
    "strictMode": false,
    "checkLayerConsistency": true
  }
}
```

#### api/config/api_config.json

```json
{
  "version": "1.0.0",
  "base_url": "http://localhost:8080",
  "endpoints": {
    "health": { "path": "/api/health", "method": "GET" },
    "project_status": { "path": "/api/project/status", "method": "GET" },
    "scripts_list": { "path": "/api/scripts/list", "method": "GET" },
    ...
  },
  "websocket": {
    "path": "/ws",
    "channels": ["progress", "log", "data", "heartbeat"]
  }
}
```

#### scripts/scripts_config.json

```json
{
  "executionRules": {
    "scheduling": {
      "daily": { "time": "02:00", "scripts": ["health_monitor.py"] }
    },
    "errorHandling": {
      "retryPolicy": { "maxRetries": 3, "backoff": "exponential" }
    }
  },
  "monitoring": {
    "metrics": {
      "executionTime": { "enabled": true, "threshold": 300 },
      "successRate": { "enabled": true, "threshold": 95 }
    }
  }
}
```

#### web/web_config.json

```json
{
  "web": {
    "server": {
      "host": "0.0.0.0",
      "port": 8080
    },
    "modules": {
      "dashboard": { "enabled": true },
      "scripts": { "enabled": true },
      "system": { "enabled": true }
    }
  },
  "integration": {
    "project": {
      "configPath": "../project_config.json"
    }
  }
}
```

### ç¯å¢ƒå˜é‡

#### .env æ–‡ä»¶

```bash
# API é…ç½®
API_HOST=0.0.0.0
API_PORT=8080
DEBUG=false

# AI é…ç½®
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b

# è·¯å¾„é…ç½®
ASSETS_PATH=./assets
OUTPUT_PATH=./output
LOGS_PATH=./logs

# GPU é…ç½®
USE_GPU=true
GPU_DEVICE=0

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

## ğŸ“‹ ä¾èµ–å®‰è£…

### ä½¿ç”¨ pip å®‰è£…

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# å®‰è£… GPU æ”¯æŒï¼ˆå¯é€‰ï¼‰
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```

### ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Linux/Mac:
source .venv/bin/activate
# Windows:
.venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

## ğŸ”§ é…ç½®éªŒè¯

### éªŒè¯è„šæœ¬

```bash
# éªŒè¯é¡¹ç›®é…ç½®
python scripts/validate_configs.py

# éªŒè¯è·¯å¾„é…ç½®
python scripts/verify_paths.py

# éªŒè¯è™šæ‹Ÿç¯å¢ƒ
python scripts/verify_venv.py

# è¿è¡Œå¥åº·æ£€æŸ¥
python scripts/health_check.py
```

### éªŒè¯é¡¹ç›®

```bash
# æ£€æŸ¥è§„åˆ™ä¸€è‡´æ€§
python scripts/health_monitor/config_validator.py --rules

# æ£€æŸ¥é…ç½®åˆè§„æ€§
python scripts/health_monitor/config_validator.py --compliance
```

## ğŸ“Š ä¾èµ–æ›´æ–°

### æ›´æ–°ç­–ç•¥

1. **å®‰å…¨æ›´æ–°**: ç«‹å³æ›´æ–°
2. **åŠŸèƒ½æ›´æ–°**: è¯„ä¼°åæ›´æ–°
3. **ç‰ˆæœ¬æ›´æ–°**: æµ‹è¯•åæ›´æ–°
4. **é‡å¤§æ›´æ–°**: è°¨æ…è¯„ä¼°

### æ›´æ–°æµç¨‹

```bash
# æ£€æŸ¥å¯æ›´æ–°åŒ…
pip list --outdated

# æ›´æ–°å•ä¸ªåŒ…
pip install --upgrade <package_name>

# é”å®šä¾èµ–ç‰ˆæœ¬
pip freeze > requirements.txt
```

## ğŸ“ æ–‡æ¡£ç‰ˆæœ¬

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| 1.0 | 2026-01-19 | åˆå§‹ç‰ˆæœ¬ |

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®æ•´ä½“æ¶æ„è®¾è®¡](01-project-architecture.md)
- [ç³»ç»Ÿè¿è¡Œæ—¶é€»è¾‘æµç¨‹](02-runtime-logic.md)
- [APIæ¥å£æ–‡æ¡£](04-frontend-backend-api.md)
- [è‡ªåŠ¨åŒ–è„šæœ¬è¯´æ˜](05-automation-scripts.md)
