你是一个思维活跃、逻辑清晰、具备全局视角的高级编程助手，擅长从整体架构出发分析和解决问题，具备系统性思维、跨模块联动能力以及对问题全局性的理解与预判能力。你能够结合不同模块之间的依赖关系，全面理解需求，拆解任务结构，制定合理的开发流程和准备步骤，避免常见的实现陷阱。

你不仅能编写结构清晰、逻辑严谨、可运行的高质量代码，还能针对调试、优化、模块划分、接口设计等环节提供切实可行的建议。对于整个项目的落地执行，你会从需求分析到功能实现、测试调试、部署上线全过程提供指导，确保各环节协调一致，推动项目顺利实现。你具备主动识别潜在问题的能力，并能在多目标权衡中做出合理技术选型。



提出至少1个对全局联动性,关联性,互动性,交互性,综合整体脚本的逻辑思路合理性和全局功能建议一个提高兼容性和预防程序无法使用或者自动优化部署的建议,这些问题尚未得到解答，或者无法从之前的对话和摘录中找到启发,对建议进行深度扩展

┌──────────────────────────────────────┐
│              输入层                  │
│  - 用户上传脚本 (JS / Python / Shell)│
│  - 配置文件 / 环境参数               │
│  - 历史版本/日志（可选）             │
└──────────────────────────────────────┘
                  │
                  ▼
┌──────────────────────────────────────┐
│              分析层                  │
│  1. 静态分析 (AST解析/语法扫描)       │
│  2. 动态分析 (沙盒运行/监控资源)     │
│  3. 依赖分析 (库/系统命令检测)       │
└──────────────────────────────────────┘
                  │
                  ▼
┌──────────────────────────────────────┐
│          检测模块（AI规则库）         │
│                                      │
│ ① 安全检测：SQL注入、XSS、API泄露     │
│ ② 兼容性检测：浏览器/OS依赖           │
│ ③ 可维护性：代码分层/注释/文档        │
│ ④ 扩展性：模块化、钩子点设计          │
│ ⑤ 容错性：异常处理、输入校验          │
│ ⑥ 资源管理：内存/文件释放             │
│ ⑦ 时间/时区：统一UTC、库支持          │
│ ⑧ 合规性：数据采集、第三方API合规     │
│ ⑨ 性能：死循环、重复加载              │
│ ⑩ 更新回退：版本号管理/灰度发布       │
└──────────────────────────────────────┘
                  │
                  ▼
┌──────────────────────────────────────┐
│              输出层                  │
│  - 风险报告 (按严重性排序)            │
│  - 预防建议 (修复方式/最佳实践)       │
│  - 自动生成待办 (可转为任务清单)      │
│  - 提供一键修复脚本（可选）           │
└──────────────────────────────────────┘


🔑 简化的运行逻辑

输入层

用户把脚本丢进来（比如 .js 文件）。

系统读取配置（比如运行环境是 Ubuntu24，Node v20）。

分析层

静态分析：用 AST（抽象语法树）解析脚本，找出可能的风险点（未定义变量、硬编码路径等）。

动态分析：在沙盒里运行，观察内存/CPU/网络请求情况。

依赖分析：检查是否依赖某些系统命令（如 bash, curl）。

检测模块（AI+规则）

结合你刚才整理的 20 大问题点，逐一检测。

AI 负责模式识别（比如判断代码结构是否清晰）。

规则库负责硬性检查（比如 try/catch 缺失、全局变量过多）。

输出层

生成一份报告：

高危问题（立即修复）

中等问题（建议优化）

低风险（未来可改进）

把解决方式写出来，比如 “增加 try-catch 捕获错误”，或者 “将时间换算为 UTC 存储”。

⚙️ 技术实现建议（简单版）

静态分析工具

JavaScript → ESLint + 自定义规则

Python → pylint + bandit

Shell → shellcheck

AI 分析模块

本地部署 GPT4All / LLaMA 模型

用 Prompt 提示 AI：

“根据风险清单检查代码是否存在：可维护性、扩展性、兼容性、安全性问题，并输出修复建议”

整合

用 Python 写一个统一入口：

收集脚本 → 2. 静态分析 → 3. AI 检测 → 4. 输出报告


如何让 AI 更好理解脚本检测问题
1. 明确上下文（Context 提供）

问题列表作为知识库

你整理的 适配性 / 全局联动性 / 功能协同 / API交互 / 顺序逻辑 / 配置合理性 / 可维护性 / 扩展性 / 安全性...

放到 AI 本地的 系统提示文件 或 知识文档（Markdown / JSON）。

这样 AI 每次检查时，都会带着这些作为参考框架。

2. 结构化输入（给 AI 提示框架）

不要让 AI 自由发挥，要让它按 固定的检测维度 输出结果。

3. 增强理解的技术手段

规则库 + AI 结合

规则库负责硬指标（例如：必须有 try/catch，必须有日志输出）。

AI 负责模糊判断（例如：代码结构是否清晰、是否容易维护）。

两者结合，避免 AI 漏判。

反馈循环（RLHF 本地化）

每次 AI 检测完 → 人类确认哪些有效 / 哪些误判。

把结果存为新样本，下次 AI 就会更“懂”你团队的标准。

多层提示（Prompt Chaining）

第一步：AI 先按类别扫描问题（安全 / 兼容 / 逻辑 / 配置）。

第二步：AI 再生成修复建议。

第三步：AI 输出最终报告。

分层提示比一次性提问更精准。

4. 可扩展的知识封装方式

JSON 格式风险清单（可让 AI 调用）

AI_Script_Check_Blueprint:
  全局上下文:
    - 路径完整性检查: "确保所有文件路径、依赖路径正确无误"
    - 主菜单子菜单分离: "检测菜单结构是否模块化、交互是否独立"
    - 跨域处理: "检查是否存在 CORS 配置、代理方案或跨域中间件"
    - 接口设计: "API 命名规范、RESTful / GraphQL 标准化、统一响应格式"
    - 数据格式: "前后端 JSON / XML / FormData 格式一致性"

  模板与渲染:
    - 模板引擎支持: "检查模板渲染是否规范，是否支持动态更新"
    - 动态渲染: "检测数据绑定与 UI 渲染是否同步"
    - 组件传递: "确保数据 props/state 传递正确，避免渲染阻塞"

  表单与安全:
    - 表单验证: "检查输入约束（必填、长度、类型等）是否完整"
    - 数据安全: "过滤用户输入，避免 XSS/SQL 注入"
    - 前后端双重验证: "后端必须二次验证请求参数，防止绕过前端验证"

  适配与兼容:
    - 浏览器兼容性: "检查是否使用 Polyfill，是否兼容常见浏览器"
    - 后台模块兼容性: "检测后台版本、依赖库与模块兼容问题"
    - 响应式适配: "UI 在不同屏幕分辨率下是否正常展示"

  全局与功能联动:
    - 全局联动性: "确保配置、路由、状态管理全局一致"
    - 功能联动性: "模块间调用是否解耦、避免循环依赖"
    - 排序逻辑性: "数据排序规则是否统一、避免前后端结果不一致"

  缓存与加载:
    - 缓存清理: "定期清理无用缓存，避免冲突"
    - 动态加载: "检查懒加载策略是否合理，避免首屏加载过慢"
    - 资源冲突: "检测是否存在重复加载、命名冲突"

  UI 与交互:
    - 分页控件: "分页是否正确显示、翻页逻辑是否正确"
    - 事件处理: "检查事件冒泡是否有误，是否正确阻止默认行为"
    - 功能冲突: "避免不同模块绑定重复事件，确保交互逻辑清晰"

