# AISP æ•´ä½“é¡¹ç›®é€»è¾‘

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

**AISP (å¤œçµARå¤šåŠŸèƒ½åˆæˆè½¯ä»¶)** æ˜¯ä¸€ä¸ªé›†æˆäººè„¸æ£€æµ‹ã€è¯†åˆ«ã€æ›¿æ¢å’ŒARç‰¹æ•ˆæ¸²æŸ“çš„ç»¼åˆæ€§è½¯ä»¶ç³»ç»Ÿã€‚

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ­ **å®æ—¶äººè„¸å¤„ç†**: æ£€æµ‹ã€è¯†åˆ«ã€æ›¿æ¢
- ğŸ¬ **è§†é¢‘åˆæˆ**: æ”¯æŒå®æ—¶è§†é¢‘æµå¤„ç†
- ğŸŒ **å¤šå¼•æ“æ”¯æŒ**: Deep Live Cam, FaceFusion, iRoop
- ğŸ“¹ **å¤šè¾“å‡ºæ¨¡å¼**: è™šæ‹Ÿæ‘„åƒå¤´ã€OBSç›´æ’­ã€æœ¬åœ°æ–‡ä»¶
- ğŸ¤– **AIæ™ºèƒ½è¾…åŠ©**: æœ¬åœ°LLMé›†æˆï¼Œè‡ªåŠ¨ç­–ç•¥ä¼˜åŒ–
- ğŸ“Š **å®æ—¶ç›‘æ§**: Webç•Œé¢ç›‘æ§æ‰€æœ‰ç³»ç»ŸçŠ¶æ€

---

## ğŸ”„ æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 1. è§†é¢‘å¤„ç†æµæ°´çº¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‘„åƒå¤´è¾“å…¥  â”‚â”€â”€â”€â–¶â”‚  äººè„¸æ£€æµ‹   â”‚â”€â”€â”€â–¶â”‚  äººè„¸å®šä½   â”‚â”€â”€â”€â–¶â”‚  ARç‰¹æ•ˆåº”ç”¨  â”‚â”€â”€â”€â–¶â”‚  è§†é¢‘è¾“å‡º   â”‚
â”‚   (Camera)  â”‚    â”‚  (Detector) â”‚    â”‚  (Landmark) â”‚    â”‚  (Renderer) â”‚    â”‚  (Output)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                 â”‚                  â”‚
                          â–¼                 â–¼                  â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  äººè„¸æ•°æ®åº“  â”‚   â”‚  ç‰¹å¾æå–   â”‚   â”‚  å¼•æ“é€‰æ‹©   â”‚
                   â”‚ (Face DB)   â”‚   â”‚(Embedding)  â”‚   â”‚(Engine Sel.)â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ•°æ®æµè¯´æ˜

```
è¾“å…¥å±‚ (Input Layer)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åç«¯æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   FastAPI   â”‚  â”‚  è®¤è¯æˆæƒ   â”‚  â”‚   ä»»åŠ¡è°ƒåº¦å™¨         â”‚  â”‚
â”‚  â”‚  (REST API) â”‚  â”‚  (Auth)     â”‚  â”‚  (Task Scheduler)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚              â–¼               â–¼               â–¼               â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚       â”‚ è§†é¢‘ç®¡é“    â”‚ â”‚ AIæ§åˆ¶å±‚    â”‚ â”‚ æ€§èƒ½ç›‘æ§    â”‚       â”‚
â”‚       â”‚(Pipeline)   â”‚ â”‚(AI Control) â”‚ â”‚(Monitor)    â”‚       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚              â”‚               â”‚               â”‚               â”‚
â”‚              â–¼               â–¼               â”‚               â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚       â”‚                     â”‚                                  â”‚
â”‚       â–¼                     â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ ARå¼•æ“å±‚    â”‚      â”‚ æ•°æ®æŒä¹…åŒ–  â”‚                         â”‚
â”‚  â”‚(Engines)    â”‚      â”‚(Database)   â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚         â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è¾“å‡ºå±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è™šæ‹Ÿæ‘„åƒå¤´  â”‚  â”‚  OBSé›†æˆ    â”‚  â”‚   æœ¬åœ°æ–‡ä»¶å¯¼å‡º       â”‚  â”‚
â”‚  â”‚(Virtual Cam)â”‚  â”‚(OBS Output) â”‚  â”‚  (File Export)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§  AIå†³ç­–é€»è¾‘

### 1. è‡ªåŠ¨ç­–ç•¥ç”Ÿæˆ

```python
def generate_strategy(context):
    """
    æ ¹æ®å½“å‰ç³»ç»ŸçŠ¶æ€å’Œç”¨æˆ·æŒ‡ä»¤ç”Ÿæˆæœ€ä½³å¤„ç†ç­–ç•¥
    
    å†³ç­–å› ç´ :
    1. GPUå¯ç”¨æ€§å’Œæ˜¾å­˜
    2. å½“å‰ç³»ç»Ÿè´Ÿè½½
    3. ç”¨æˆ·æŒ‡ä»¤æ„å›¾
    4. å†å²æœ€ä¼˜é€‰æ‹©
    """
    # è·å–ç³»ç»ŸçŠ¶æ€
    sys_status = get_system_status()
    
    # åˆ†æç”¨æˆ·æŒ‡ä»¤
    instruction = parse_instruction(context.user_instruction)
    
    # ç”Ÿæˆå€™é€‰ç­–ç•¥
    candidates = []
    
    # æ ¹æ®GPUé€‰æ‹©å¼•æ“
    if sys_status.gpu_available and sys_status.gpu_memory > 4:
        candidates.append(Strategy(
            engine="deep-live-cam",
            quality="high",
            smoothness=0.9
        ))
    else:
        candidates.append(Strategy(
            engine="facefusion",
            quality="medium",
            smoothness=0.7
        ))
    
    # æ ¹æ®æŒ‡ä»¤è°ƒæ•´å‚æ•°
    if instruction.has_expression_change:
        candidates[-1].expression = instruction.expression_type
    
    # é€‰æ‹©æœ€ä¼˜ç­–ç•¥
    best = select_best_strategy(candidates, context)
    
    return best
```

### 2. æ€§èƒ½è‡ªé€‚åº”

```
ç³»ç»Ÿè´Ÿè½½æ£€æµ‹
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è´Ÿè½½ < 30%     â”‚â”€â”€â”€â–¶ æ¨è: é«˜è´¨é‡æ¨¡å¼ + å¤šçº¿ç¨‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´Ÿè½½    â”‚  â”‚ è´Ÿè½½   â”‚
â”‚ 30-60% â”‚  â”‚ > 60%  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨è:  â”‚  â”‚ æ¨è:  â”‚
â”‚ å¹³è¡¡   â”‚  â”‚ æ€§èƒ½   â”‚
â”‚ æ¨¡å¼   â”‚  â”‚ ä¼˜å…ˆ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š çŠ¶æ€ç®¡ç†

### 1. ç³»ç»ŸçŠ¶æ€æµè½¬

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   åˆå§‹åŒ–    â”‚
                    â”‚ (INIT)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚      ç­‰å¾…ä¸­            â”‚
              â”‚     (WAITING)          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  å¯åŠ¨ä¸­     â”‚                 â”‚   ç©ºé—²      â”‚
   â”‚ (STARTING)  â”‚                 â”‚  (IDLE)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                               â”‚
          â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                   â–¼                       â–¼
          â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚            â”‚  å¤„ç†ä¸­     â”‚         â”‚   æš‚åœ      â”‚
          â”‚            â”‚ (PROCESSING)â”‚         â”‚  (PAUSED)   â”‚
          â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                       â”‚
          â”‚                   â”‚                       â”‚
          â”‚                   â–¼                       â”‚
          â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
          â”‚            â”‚   å®Œæˆ      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚            â”‚ (COMPLETED) â”‚
          â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚   é”™è¯¯      â”‚
                                           â”‚  (ERROR)    â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                  â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚   é‡è¯•      â”‚â”€â”€â”€â–¶ è¿”å›IDLE
                                           â”‚ (RETRY)     â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. çŠ¶æ€æ•°æ®ç»“æ„

```python
class SystemStatus:
    state: str                    # å½“å‰çŠ¶æ€
    pipeline_status: dict         # ç®¡é“çŠ¶æ€
    ai_status: dict              # AIçŠ¶æ€
    performance_stats: dict      # æ€§èƒ½ç»Ÿè®¡
    
class PipelineStatus:
    active: bool                  # æ˜¯å¦æ´»è·ƒ
    queue_size: int              # é˜Ÿåˆ—é•¿åº¦
    processing_fps: float        # å¤„ç†å¸§ç‡
    current_task: str            # å½“å‰ä»»åŠ¡
    progress: float              # å®Œæˆè¿›åº¦

class AIStatus:
    available: bool              # æ˜¯å¦å¯ç”¨
    model_loaded: str            # å·²åŠ è½½æ¨¡å‹
    model_memory: float          # æ¨¡å‹å†…å­˜å ç”¨
    inference_time: float        # æ¨ç†æ—¶é—´
```

---

## ğŸ”Œ æ¨¡å—äº¤äº’

### 1. APIè°ƒç”¨é“¾

```
Web/GUI
    â”‚
    â–¼ HTTP Request
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPI    â”‚â”€â”€â”€â–¶ è¯·æ±‚éªŒè¯ (validator.py)
â”‚  (api.py)   â”‚â”€â”€â”€â–¶ è®¤è¯æ£€æŸ¥ (auth.py)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ Route Handler
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»Ÿä¸€API    â”‚â”€â”€â”€â–¶ ä¸šåŠ¡é€»è¾‘å¤„ç†
â”‚(unified_api)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ Service Call
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Services                             â”‚
â”‚  video_pipeline.py  â”‚  camera_service.py  â”‚  ai_interfaceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AR Engines    â”‚
                    â”‚ deep-live-cam   â”‚
                    â”‚ facefusion      â”‚
                    â”‚ iRoop           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. äº‹ä»¶æµ

```python
# äº‹ä»¶ç±»å‹å®šä¹‰
EVENT_TYPES = {
    'TASK_CREATED': 'ä»»åŠ¡å·²åˆ›å»º',
    'TASK_STARTED': 'ä»»åŠ¡å·²å¼€å§‹',
    'TASK_PROGRESS': 'ä»»åŠ¡è¿›åº¦æ›´æ–°',
    'TASK_COMPLETED': 'ä»»åŠ¡å·²å®Œæˆ',
    'TASK_FAILED': 'ä»»åŠ¡å¤±è´¥',
    'ENGINE_STARTED': 'å¼•æ“å·²å¯åŠ¨',
    'ENGINE_STOPPED': 'å¼•æ“å·²åœæ­¢',
    'PERFORMANCE_ALERT': 'æ€§èƒ½å‘Šè­¦',
    'SYSTEM_ERROR': 'ç³»ç»Ÿé”™è¯¯'
}

# äº‹ä»¶å¤„ç†æµç¨‹
def handle_event(event_type, data):
    # 1. è®°å½•äº‹ä»¶
    log_event(event_type, data)
    
    # 2. è§¦å‘å›è°ƒ
    for callback in event_callbacks[event_type]:
        callback(data)
    
    # 3. æ›´æ–°çŠ¶æ€
    update_state(event_type, data)
    
    # 4. å¹¿æ’­é€šçŸ¥
    broadcast_event(event_type, data)
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. å¼‚æ­¥å¤„ç†

```python
# å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—
class TaskQueue:
    def __init__(self, max_concurrent=4):
        self.semaphore = asyncio.Semaphore(max_concurrent)
    
    async def add_task(self, coro):
        async with self.semaphore:
            return await coro
    
    async def process_batch(self, tasks):
        return await asyncio.gather(*[
            self.add_task(task) for task in tasks
        ])
```

### 2. ç¼“å­˜ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç¼“å­˜å±‚çº§                                â”‚
â”‚                                                             â”‚
â”‚  L1: å†…å­˜ç¼“å­˜ (å†…å­˜å˜é‡)     - çº³ç§’çº§è®¿é—®, ä¸´æ—¶æ•°æ®          â”‚
â”‚  L2: è¿›ç¨‹ç¼“å­˜ (LRU Cache)   - æ¯«ç§’çº§è®¿é—®, é¢‘ç¹è®¿é—®æ•°æ®      â”‚
â”‚  L3: ç£ç›˜ç¼“å­˜ (æŒä¹…åŒ–)      - ç§’çº§è®¿é—®, å†å²æ•°æ®            â”‚
â”‚  L4: æ•°æ®åº“ç¼“å­˜ (SQLite)    - æŒä¹…åŒ–, ç»“æ„åŒ–æ•°æ®            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¼“å­˜æ›´æ–°ç­–ç•¥:
- å†™å…¥æ—¶: Write-Through (åŒæ­¥å†™å…¥)
- è¯»å–æ—¶: Cache-Aside (æ—è·¯è¯»å–)
- è¿‡æœŸ: TTL (5åˆ†é’Ÿé»˜è®¤)
```

### 3. GPUèµ„æºç®¡ç†

```python
class GPUManager:
    def allocate(self, required_memory):
        """åˆ†é…GPUå†…å­˜"""
        available = get_gpu_memory()
        
        if available < required_memory:
            # æ¸…ç†ç¼“å­˜
            torch.cuda.empty_cache()
            available = get_gpu_memory()
        
        if available < required_memory:
            # é™çº§å¤„ç†
            return self.allocate(required_memory * 0.7)
        
        return True
    
    def release(self, memory):
        """é‡Šæ”¾GPUå†…å­˜"""
        torch.cuda.empty_cache()
```

---

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†æœºåˆ¶

### 1. é”™è¯¯åˆ†ç±»

| é”™è¯¯ç±»å‹ | å¤„ç†ç­–ç•¥ | æ¢å¤æ–¹å¼ |
|---------|---------|---------|
| ç½‘ç»œé”™è¯¯ | è‡ªåŠ¨é‡è¯• (3æ¬¡) | æŒ‡æ•°é€€é¿ |
| è¶…æ—¶é”™è¯¯ | è¯·æ±‚é‡å‘ | å¢åŠ è¶…æ—¶ |
| èµ„æºä¸è¶³ | é™çº§å¤„ç† | èµ„æºæ¸…ç† |
| å¼•æ“é”™è¯¯ | åˆ‡æ¢å¼•æ“ | å¼•æ“é‡å¯ |
| è®¤è¯é”™è¯¯ | é‡æ–°ç™»å½• | Tokenåˆ·æ–° |
| ç³»ç»Ÿé”™è¯¯ | æœåŠ¡é‡å¯ | ç´§æ€¥æ¢å¤ |

### 2. é”™è¯¯å“åº”æ ¼å¼

```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°",
    "details": {
      "reason": "å¤±è´¥åŸå› ",
      "suggestion": "ä¿®å¤å»ºè®®"
    },
    "timestamp": "2025-01-21T10:30:00Z",
    "request_id": "req_123456"
  }
}
```

---

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. è®¤è¯æµç¨‹

```
ç”¨æˆ·ç™»å½•
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·åå¯†ç  â”‚â”€â”€â”€â”€â–¶â”‚  æœåŠ¡ç«¯éªŒè¯ â”‚â”€â”€â”€â”€â–¶â”‚  ç”ŸæˆToken â”‚
â”‚  (Client)   â”‚     â”‚  (Server)   â”‚     â”‚  (JWT)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æºå¸¦Token  â”‚â—€â”€â”€â”€â”€â”‚  éªŒè¯Token  â”‚â—€â”€â”€â”€â”€â”‚  å­˜å‚¨Token  â”‚
â”‚  è®¿é—®API    â”‚     â”‚  (Middleware)â”‚     â”‚  (Client)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æƒé™æ§åˆ¶

```python
PERMISSIONS = {
    'viewer': ['read'],
    'operator': ['read', 'write', 'execute'],
    'admin': ['read', 'write', 'execute', 'manage_users', 'system_config']
}

def require_permission(permission):
    def decorator(func):
        async def wrapper(request, *args, **kwargs):
            user = get_current_user(request)
            if permission in user.permissions:
                return await func(request, *args, **kwargs)
            raise PermissionDenied(f"éœ€è¦ {permission} æƒé™")
        return wrapper
    return decorator
```

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### 1. æ ¸å¿ƒæŒ‡æ ‡

| æŒ‡æ ‡ | é˜ˆå€¼ | å‘Šè­¦çº§åˆ« |
|-----|------|---------|
| CPUä½¿ç”¨ç‡ | > 80% | Warning |
| å†…å­˜ä½¿ç”¨ç‡ | > 85% | Warning |
| GPUä½¿ç”¨ç‡ | > 90% | Critical |
| é˜Ÿåˆ—é•¿åº¦ | > 100 | Warning |
| å¤„ç†å»¶è¿Ÿ | > 500ms | Warning |
| é”™è¯¯ç‡ | > 5% | Critical |

### 2. ç›‘æ§æ•°æ®æµ

```
é‡‡é›† (psutil/GPUtil)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æŒ‡æ ‡èšåˆ                       â”‚
â”‚  - å¹³å‡å€¼è®¡ç®—                            â”‚
â”‚  - å³°å€¼æ£€æµ‹                              â”‚
â”‚  - è¶‹åŠ¿åˆ†æ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  å®æ—¶å±•ç¤º   â”‚     â”‚   å‘Šè­¦è§¦å‘  â”‚
  â”‚  (Web)      â”‚     â”‚  (Alert)    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*æœ€åæ›´æ–°: 2025-01-21 | ç‰ˆæœ¬: 2.0.0*
