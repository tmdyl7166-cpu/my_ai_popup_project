# AISP - æœ¬åœ°AIæ¢è„¸ç³»ç»Ÿ

<p align="center">
  <strong>åŸºäºæœ¬åœ°AIçš„æ™ºèƒ½æ¢è„¸ä¸å®æ—¶å¤„ç†ç³»ç»Ÿ</strong>
</p>

<p align="center">
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#é¡¹ç›®æ¶æ„">é¡¹ç›®æ¶æ„</a> â€¢
  <a href="#å®‰è£…éƒ¨ç½²">å®‰è£…éƒ¨ç½²</a> â€¢
  <a href="#ä½¿ç”¨è¯´æ˜">ä½¿ç”¨è¯´æ˜</a> â€¢
  <a href="#é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</a> â€¢
  <a href="#é…ç½®è¯´æ˜">é…ç½®è¯´æ˜</a> â€¢
  <a href="#è§„åˆ™é…ç½®">è§„åˆ™é…ç½®</a>
</p>

## ç®€ä»‹

AISP (AI Swap Platform) æ˜¯ä¸€ä¸ªå®Œå…¨ç¦»çº¿çš„æœ¬åœ°ARåˆæˆç³»ç»Ÿï¼Œä»¥äººè„¸ä¸åœºæ™¯ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡ç»Ÿä¸€AIç­–ç•¥å±‚è°ƒåº¦å¤šç§æœ¬åœ°æ¨¡å‹ä¸å¼•æ“ï¼Œå®ç°å›¾ç‰‡/è§†é¢‘/å®æ—¶æ‘„åƒå¤´ä¹‹é—´çš„æ™ºèƒ½è¯†åˆ«ã€åˆæˆä¸è¾“å‡ºï¼Œç¨³å®šæ¥å…¥è™šæ‹Ÿæ‘„åƒå¤´ä¸OBSã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **æœ¬åœ°AIç­–ç•¥** - ä½¿ç”¨Ollama/LLaMA 3.2ç”Ÿæˆæ™ºèƒ½ä¼˜åŒ–ç­–ç•¥
- ğŸ­ **å¤šå¼•æ“æ”¯æŒ** - Deep-Live-Camã€FaceFusionã€iRoopæ— ç¼é›†æˆ
- ğŸ“¹ **å®æ—¶å¤„ç†** - æ”¯æŒæ‘„åƒå¤´å®æ—¶æ¢è„¸ä¸ç‰¹æ•ˆå¤„ç†
- ğŸ¥ **è™šæ‹Ÿæ‘„åƒå¤´** - è¾“å‡ºåˆ°ä»»æ„æ”¯æŒè™šæ‹Ÿæ‘„åƒå¤´çš„åº”ç”¨
- ğŸ› **OBSè”åŠ¨** - è‡ªåŠ¨åœºæ™¯åˆ‡æ¢ä¸è¾“å‡ºæ§åˆ¶
- ğŸ“Š **æ€§èƒ½ç›‘æ§** - å®æ—¶æ€§èƒ½æŒ‡æ ‡ä¸è‡ªåŠ¨ä¼˜åŒ–
- ğŸ–¥ **å›¾å½¢ç•Œé¢** - PyQt6ç°ä»£åŒ–æ¡Œé¢ç•Œé¢
- ğŸ”Œ **REST API** - FastAPIå®Œæ•´APIæ¥å£
- ğŸŒ **Webç›‘æ§** - å…¨é¡¹ç›®Webç›‘æ§ç•Œé¢

## é¡¹ç›®æ¶æ„

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

æœ¬é¡¹ç›®é‡‡ç”¨**äº”å±‚é€»è¾‘æ¶æ„**ï¼Œç¡®ä¿ç»“æ„ä¸€è‡´æ€§ã€é€»è¾‘ä¸€è‡´æ€§ä¸å¯æ¼”åŒ–æ€§ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    L1 å…ƒç›®æ ‡å±‚ (Meta Goal)                   â”‚
â”‚          ä¿æŒç»“æ„ä¸€è‡´ã€é€»è¾‘ä¸€è‡´ã€é«˜åº¦å¯æ¼”åŒ–                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    L2 å…¨å±€ç†è§£å±‚ (Global Understanding)      â”‚
â”‚              æ„å»ºé¡¹ç›®æŠ½è±¡æ¨¡å‹ï¼Œæ¨æ–­æ¨¡å—ã€æ•°æ®æµã€æ§åˆ¶æµ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    L3 çº¦æŸå±‚ (Constraints)                   â”‚
â”‚         åŠ è½½æ‰€æœ‰é¡¹ç›®çº¦å®šä¸è§„åˆ™ï¼Œç¡®ä¿ä¸è¿åä»»ä½•çº¦æŸ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    L4 å†³ç­–å±‚ (Decision)                      â”‚
â”‚           åšå‡ºå†³ç­–ï¼Œç¡®å®šä¿®æ”¹èŒƒå›´å’Œä¼˜å…ˆçº§                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    L5 æ‰§è¡Œå±‚ (Execution)                     â”‚
â”‚              æ‰§è¡Œå…·ä½“çš„ä¿®æ”¹ã€ä¿®å¤ã€é‡æ„ã€æ¸…ç†ç­‰è¡Œä¸º            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å±‚çº§è¯´æ˜

| å±‚çº§ | åç§° | ä¸»è¦èŒè´£ |
|------|------|----------|
| L1 | å…ƒç›®æ ‡å±‚ | å®šä¹‰ç»ˆæç›®æ ‡ï¼Œå†³å®šæ­£ç¡®æ–¹å‘ |
| L2 | å…¨å±€ç†è§£å±‚ | æ„å»ºé¡¹ç›®æŠ½è±¡æ¨¡å‹ï¼Œç†è§£æ¨¡å—å…³ç³» |
| L3 | çº¦æŸå±‚ | åŠ è½½è§„åˆ™å’Œé™åˆ¶ï¼Œè®¾å®šè¡Œä¸ºè¾¹ç•Œ |
| L4 | å†³ç­–å±‚ | åˆ¤æ–­å¯ä¿®æ”¹å†…å®¹ï¼Œç¡®å®šä¼˜å…ˆçº§ |
| L5 | æ‰§è¡Œå±‚ | æ‰§è¡Œå…·ä½“ä¿®æ”¹æ“ä½œ |

### æ¨¡å—æ¶æ„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           ç”¨æˆ·äº¤äº’å±‚ (GUI)           â”‚
                    â”‚     ğŸ¨ gui/ (PyQt6 å›¾å½¢ç•Œé¢)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           åç«¯æœåŠ¡å±‚ (Backend)       â”‚
                    â”‚     ğŸ”Œ backend/ (FastAPI + AI)      â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚       AIæ§åˆ¶å±‚ (ai_control)     â”‚ â”‚
                    â”‚  â”‚  â€¢ auto_strategy.py             â”‚ â”‚
                    â”‚  â”‚  â€¢ ollama_client.py             â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚       ARå¼•æ“å±‚ (ar_engine)      â”‚ â”‚
                    â”‚  â”‚  â€¢ frame_pipeline.py            â”‚ â”‚
                    â”‚  â”‚  â€¢ Deep-Live-Cam/               â”‚ â”‚
                    â”‚  â”‚  â€¢ facefusion/                  â”‚ â”‚
                    â”‚  â”‚  â€¢ iRoopDeepFaceCam/            â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚      æ§åˆ¶æ ¸å¿ƒ (control_core)    â”‚ â”‚
                    â”‚  â”‚  â€¢ server.py                    â”‚ â”‚
                    â”‚  â”‚  â€¢ state_manager.py             â”‚ â”‚
                    â”‚  â”‚  â€¢ pipeline_manager.py          â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚        ä¸šåŠ¡æœåŠ¡ (services)      â”‚ â”‚
                    â”‚  â”‚  â€¢ video_pipeline.py            â”‚ â”‚
                    â”‚  â”‚  â€¢ face_swap.py                 â”‚ â”‚
                    â”‚  â”‚  â€¢ camera_service.py            â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                             â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¹ è™šæ‹Ÿæ‘„åƒå¤´   â”‚         â”‚  ğŸ“º OBSé›†æˆ       â”‚        â”‚  ğŸŒ Webç›‘æ§       â”‚
â”‚ virtual_cam/    â”‚         â”‚ obs_integration/  â”‚        â”‚ web/              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é…ç½®æ¶æ„

```
AISP/config/
â”œâ”€â”€ rules/                    # è§„åˆ™é…ç½®å±‚ (L0-L5)
â”‚   â”œâ”€â”€ root_rules.json       # L0 æ ¹è§„åˆ™é…ç½®
â”‚   â”œâ”€â”€ project_config.json   # L1 é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ runtime_config.json   # L2 è¿è¡Œé…ç½®
â”‚   â”œâ”€â”€ feature_config.json   # L3 åŠŸèƒ½é…ç½®
â”‚   â”œâ”€â”€ execution_config.json # L4 æ‰§è¡Œé…ç½®
â”‚   â””â”€â”€ feature_index.json    # L5 åŠŸèƒ½ç´¢å¼•
â”œâ”€â”€ ai/                       # AIé…ç½®
â”‚   â”œâ”€â”€ capability_map.json   # èƒ½åŠ›æ˜ å°„
â”‚   â””â”€â”€ model_config.json     # æ¨¡å‹é…ç½®
â””â”€â”€ tasks/                    # ä»»åŠ¡é…ç½®
    â”œâ”€â”€ task_queue.json       # ä»»åŠ¡é˜Ÿåˆ—
    â””â”€â”€ task_schema.json      # ä»»åŠ¡Schema
```

## å®‰è£…éƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚

- Python 3.10+
- 8GB+ RAM (æ¨è16GB)
- æ”¯æŒCUDAçš„GPU (æ¨è)
- Linux/Windows/macOS

### å¿«é€Ÿå®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
cd /home/vboxuser/æ¡Œé¢/BX/AIè§„åˆ™/AISP

# 2. å®‰è£…ä¾èµ–
bash scripts/setup_env.sh

# 3. å®‰è£…Ollama (å¦‚éœ€æœ¬åœ°AI)
curl -fsSL https://ollama.ai/install.sh | sh
ollama pull llama3.2

# 4. å¯åŠ¨æœåŠ¡
bash scripts/start_server.sh

# 5. å¯åŠ¨GUI (å¯é€‰)
bash scripts/start_gui.sh
```

### Dockeréƒ¨ç½²

```bash
cd containers
docker build -t aisp .
docker compose up -d
```

## ä½¿ç”¨è¯´æ˜

### å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
bash scripts/start_all.sh

# ä»…å¯åŠ¨åç«¯
bash scripts/start_server.sh

# ä»…å¯åŠ¨GUI
bash scripts/start_gui.sh

# å¸¦Ollamaå¯åŠ¨
bash scripts/start_aisp_with_ollama.sh
```

### APIæ¥å£

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ï¼š

- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **çŠ¶æ€ç›‘æ§**: http://localhost:8000/api/status

### æ ¸å¿ƒAPIç«¯ç‚¹

```python
# å¤„ç†å•å¸§å›¾åƒ
POST /api/frame/process
{
    "image_base64": "<base64ç¼–ç å›¾ç‰‡>",
    "options": {"detect_only": False}
}

# å¤„ç†è§†é¢‘æ–‡ä»¶
POST /api/video/process
{
    "input_path": "/path/to/input.mp4",
    "output_path": "/path/to/output.mp4"
}

# ç”ŸæˆAIç­–ç•¥
POST /api/strategy/generate
{
    "active_modules": ["face_swap"],
    "user_instruction": "ä¼˜åŒ–æ¢è„¸æ•ˆæœ",
    "auto_optimize": True
}

# ä»»åŠ¡ç®¡ç†
GET  /api/tasks           # åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
POST /api/tasks           # åˆ›å»ºä»»åŠ¡
POST /api/tasks/{id}/execute  # æ‰§è¡Œä»»åŠ¡
```

### GUIæ“ä½œ

1. **é¦–é¡µ** - ç³»ç»Ÿæ¦‚è§ˆä¸å¿«é€Ÿå…¥å£
2. **è§†é¢‘å¤„ç†** - ä¸Šä¼ è§†é¢‘ï¼Œé€‰æ‹©æ¢è„¸å¼•æ“ï¼Œå¤„ç†å¹¶ä¸‹è½½
3. **å®æ—¶æ‘„åƒå¤´** - å®æ—¶é¢„è§ˆä¸å‚æ•°è°ƒæ•´
4. **AIç­–ç•¥** - æŸ¥çœ‹å’Œè°ƒæ•´AIç”Ÿæˆçš„ä¼˜åŒ–ç­–ç•¥
5. **è®¾ç½®** - ç³»ç»Ÿé…ç½®ä¸å¼•æ“ç®¡ç†

## é¡¹ç›®ç»“æ„

```
AISP/
â”œâ”€â”€ ğŸ¨ gui/                          # GUIæœ¬åœ°ç”¨æˆ·ç•Œé¢å±‚
â”‚   â”œâ”€â”€ main_window.py              # ä¸»çª—å£
â”‚   â”œâ”€â”€ hot_window_manager.py       # çƒ­çª—å£ç®¡ç†
â”‚   â”œâ”€â”€ api_config.py               # APIé…ç½®
â”‚   â”œâ”€â”€ dialogs/                    # å¯¹è¯æ¡†
â”‚   â”‚   â”œâ”€â”€ ar_config_dialog.py     # ARé…ç½®å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ TODO_IMPLEMENTATION.md    
â”‚   â”œâ”€â”€ services/                   # GUIæœåŠ¡
â”‚   â”‚   â””â”€â”€ api_service.py          # APIæœåŠ¡å°è£…
â”‚   â””â”€â”€ widgets/                    # UIç»„ä»¶
â”‚       â”œâ”€â”€ ar_engine.py            # ARå¼•æ“ç»„ä»¶
â”‚       â”œâ”€â”€ live_streaming.py       # ç›´æ’­ç»„ä»¶
â”‚       â”œâ”€â”€ service_status_widget.py# æœåŠ¡çŠ¶æ€ç»„ä»¶
â”‚       â”œâ”€â”€ system_tray.py          # ç³»ç»Ÿæ‰˜ç›˜
â”‚       â””â”€â”€ web_embed_widget.py     # WebåµŒå…¥ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸ”Œ backend/                     # åç«¯æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.py                      # FastAPIå…¥å£
â”‚   â”œâ”€â”€ unified_api.py              # ç»Ÿä¸€API
â”‚   â”œâ”€â”€ models.py                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ path_utils.py               # è·¯å¾„å·¥å…·
â”‚   â”œâ”€â”€ ai_control/                 # AIæ§åˆ¶å±‚
â”‚   â”‚   â”œâ”€â”€ auto_strategy.py        # è‡ªåŠ¨ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ ollama_client.py        # Ollamaå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ memory_db.py            # å†…å­˜æ•°æ®åº“
â”‚   â”œâ”€â”€ ar_engine/                  # ARå¼•æ“å±‚
â”‚   â”‚   â”œâ”€â”€ frame_pipeline.py       # å¸§å¤„ç†ç®¡é“
â”‚   â”‚   â”œâ”€â”€ adapters/               # é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ tracker/                # è¿½è¸ªå™¨
â”‚   â”‚   â”œâ”€â”€ Deep-Live-Cam/          # Deep Live Camå¼•æ“
â”‚   â”‚   â”œâ”€â”€ facefusion/             # FaceFusionå¼•æ“
â”‚   â”‚   â””â”€â”€ iRoopDeepFaceCam/       # iRoopå¼•æ“
â”‚   â”œâ”€â”€ control_core/               # æ§åˆ¶æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ server.py               # æœåŠ¡ç«¯
â”‚   â”‚   â”œâ”€â”€ state_manager.py        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ pipeline_manager.py     # ç®¡é“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ auth.py                 # è®¤è¯æˆæƒ
â”‚   â”‚   â”œâ”€â”€ monitor.py              # ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ resource_guard.py       # èµ„æºä¿æŠ¤
â”‚   â”‚   â”œâ”€â”€ instruction_parser.py   # æŒ‡ä»¤è§£æ
â”‚   â”‚   â”œâ”€â”€ module_router.py        # æ¨¡å—è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ user_session.py         # ç”¨æˆ·ä¼šè¯
â”‚   â”‚   â””â”€â”€ validator.py            # éªŒè¯å™¨
â”‚   â”œâ”€â”€ services/                   # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ video_pipeline.py       # è§†é¢‘ç®¡é“
â”‚   â”‚   â”œâ”€â”€ face_detection.py       # äººè„¸æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ face_recognition.py     # äººè„¸è¯†åˆ«
â”‚   â”‚   â”œâ”€â”€ face_swap.py            # äººè„¸æ›¿æ¢
â”‚   â”‚   â”œâ”€â”€ camera_service.py       # æ‘„åƒå¤´æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ video_compositor.py     # è§†é¢‘åˆæˆ
â”‚   â”‚   â”œâ”€â”€ task_scheduler.py       # ä»»åŠ¡è°ƒåº¦
â”‚   â”‚   â”œâ”€â”€ task_executor.py        # ä»»åŠ¡æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ performance_monitor.py  # æ€§èƒ½ç›‘æ§
â”‚   â”‚   â””â”€â”€ local_ai_interface.py   # æœ¬åœ°AIæ¥å£
â”‚   â”œâ”€â”€ database/                   # æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ db.py
â”‚   â””â”€â”€ utils/                      # å·¥å…·ç±»
â”‚       â””â”€â”€ image_utils.py          # å›¾åƒå·¥å…·
â”‚
â”œâ”€â”€ âš™ï¸ engines/                     # å¼•æ“åŸºç±»
â”‚   â””â”€â”€ engine_base.py              # å¼•æ“åŸºç±»
â”‚
â”œâ”€â”€ ğŸ“¹ virtual_cam/                 # è™šæ‹Ÿæ‘„åƒå¤´
â”‚   â””â”€â”€ virtual_camera.py           # è™šæ‹Ÿæ‘„åƒå¤´å®ç°
â”‚
â”œâ”€â”€ ğŸ“º obs_integration/             # OBSé›†æˆ
â”‚   â””â”€â”€ obs_controller.py           # OBSæ§åˆ¶å™¨
â”‚
â”œâ”€â”€ ğŸŒ web/                         # å…¨é¡¹ç›®Webç›‘æ§å±‚
â”‚   â”œâ”€â”€ web_api.py                  # Web APIæœåŠ¡ 
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ index.html              # ä¸»é¡µé¢æ¨¡æ¿
â”‚   â””â”€â”€ static/                     # é™æ€èµ„æº
â”‚       â”œâ”€â”€ css/                    # æ ·å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ js/                     # JavaScript
â”‚       â”‚   â”œâ”€â”€ app.js              # ä¸»åº”ç”¨
â”‚       â”‚   â”œâ”€â”€ api.js              # APIæ¨¡å—
â”‚       â”‚   â”œâ”€â”€ charts.js           # å›¾è¡¨æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ components.js       # ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ config.js           # é…ç½®
â”‚       â”‚   â”œâ”€â”€ store.js            # çŠ¶æ€ç®¡ç†
â”‚       â”‚   â””â”€â”€ utils.js            # å·¥å…·
â”‚       â””â”€â”€ lib/                    # ç¬¬ä¸‰æ–¹åº“
â”‚
â”œâ”€â”€ âš™ï¸ data/                        # æ•°æ®ä¸è§„åˆ™é…ç½®ç›®å½•
â”‚   â””â”€â”€ rules/                      # è§„åˆ™é…ç½®å±‚
â”‚       â”œâ”€â”€ config_loader.py        # é…ç½®åŠ è½½å™¨
â”‚       â”œâ”€â”€ root_rules.json         # L0 æ ¹è§„åˆ™é…ç½®
â”‚       â”œâ”€â”€ project_config.json     # L1 é¡¹ç›®é…ç½®
â”‚       â”œâ”€â”€ runtime_config.json     # L2 è¿è¡Œé…ç½®
â”‚       â”œâ”€â”€ feature_config.json     # L3 åŠŸèƒ½é…ç½®
â”‚       â”œâ”€â”€ execution_config.json   # L4 æ‰§è¡Œé…ç½®
â”‚       â”œâ”€â”€ feature_index.json      # L5 åŠŸèƒ½ç´¢å¼•
â”‚       â””â”€â”€ README.md               # è§„åˆ™é…ç½®è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ³ containers/                   # Dockerå®¹å™¨é…ç½®
â”‚   â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”‚   â”œâ”€â”€ Dockerfile                  # Dockeré•œåƒ
â”‚   â”œâ”€â”€ docker-compose.yml          # ç¼–æ’é…ç½®
â”‚   â””â”€â”€ start_aisp.sh               # å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“œ scripts/                     # è‡ªåŠ¨åŒ–è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ start_all.sh                # å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”‚   â”œâ”€â”€ start_server.sh             # å¯åŠ¨åç«¯
â”‚   â”œâ”€â”€ start_gui.sh                # å¯åŠ¨GUI
â”‚   â”œâ”€â”€ start_hot_window.sh         # å¯åŠ¨çƒ­çª—å£
â”‚   â”œâ”€â”€ start_aisp_with_ollama.sh   # å¸¦Ollamaå¯åŠ¨
â”‚   â”œâ”€â”€ setup_env.sh                # ç¯å¢ƒè®¾ç½®
â”‚   â”œâ”€â”€ deploy.sh                   # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh                   # å¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ health_check.py             # å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ monitor.py                  # ç›‘æ§è„šæœ¬
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“ data/                        # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ last_check_state.json       # æœ€åæ£€æŸ¥çŠ¶æ€
â”‚
â”œâ”€â”€ ğŸ“š docs/                        # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ README.md                   # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md              # æœ¬æ–‡æ¡£
â”‚   â”œâ”€â”€ æ•´ä½“é¡¹ç›®é€»è¾‘.md              # é¡¹ç›®é€»è¾‘
â”‚   â”œâ”€â”€ æ¨¡å—ä¾èµ–å…³ç³».md              # æ¨¡å—ä¾èµ–
â”‚   â”œâ”€â”€ ç»Ÿä¸€æ¥å£.md                  # APIæ–‡æ¡£
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“„ æ ¹ç›®å½•é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .blackboxrules              # AIè§„åˆ™
â”‚   â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥
â”‚   â”œâ”€â”€ run_gui.py                  # GUIå¯åŠ¨
â”‚   â”œâ”€â”€ web.py                      # å…¨é¡¹ç›®ç›‘æ§å¯åŠ¨
â”‚   â”œâ”€â”€ directory_structure.json    # ç›®å½•ç»“æ„é…ç½®
â”‚   â”œâ”€â”€ logic_layers_deployment.json# äº”å±‚é€»è¾‘éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ README.md                   # é¡¹ç›®è‡ªè¿° (æœ¬æ–‡æ¡£)
â”‚
â””â”€â”€ ğŸ“¦ ollama-models/                # Ollamaæ¨¡å‹ç›®å½•
```

## é…ç½®è¯´æ˜

### è§„åˆ™é…ç½®å±‚æ¬¡

é¡¹ç›®é‡‡ç”¨å…­å±‚é…ç½®æ¶æ„ï¼Œä»æ ¹è§„åˆ™åˆ°åŠŸèƒ½ç´¢å¼•å½¢æˆå®Œæ•´çš„é…ç½®ä½“ç³»ï¼š

| å±‚çº§ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| L0 | `data/rules/root_rules.json` | æ ¹è§„åˆ™ï¼šå‘½åçº¦æŸã€ç»“æ„çº¦æŸã€å®‰å…¨çº¦æŸ |
| L1 | `data/rules/project_config.json` | é¡¹ç›®é…ç½®ï¼šæ¨¡å—å®šä¹‰ã€è·¯å¾„ã€æ•°æ®æµ |
| L2 | `data/rules/runtime_config.json` | è¿è¡Œé…ç½®ï¼šæœåŠ¡å™¨ã€èµ„æºã€æ€§èƒ½ |
| L3 | `data/rules/feature_config.json` | åŠŸèƒ½é…ç½®ï¼šGUIã€ARã€AIã€ç®¡é“ç­‰ |
| L4 | `data/rules/execution_config.json` | æ‰§è¡Œé…ç½®ï¼šæ‰§è¡Œæµç¨‹ã€å†²çªè§£å†³ |
| L5 | `data/rules/feature_index.json` | åŠŸèƒ½ç´¢å¼•ï¼šé…ç½®å…³ç³»å’Œå¼•ç”¨ |

### åŠ è½½é¡ºåº

```
L0: root_rules.json â†’ L1: project_config.json â†’ L2: runtime_config.json 
    â†’ L3: feature_config.json â†’ L4: execution_config.json â†’ L5: feature_index.json
```

### å¼•æ“é…ç½®

åœ¨ `engines/*/config.json` ä¸­é…ç½®å„å¼•æ“å‚æ•°ï¼š

```json
{
    "enabled": true,
    "execution_provider": "cuda",
    "model_path": "./models",
    "quality": "high"
}
```

### AIé…ç½®

åœ¨ `data/rules/feature_config.json` ä¸­é…ç½®æœ¬åœ°AIï¼š

```json
{
    "ai_control": {
        "ollama": {
            "base_url": "http://localhost:11434",
            "default_model": "llama3.2"
        }
    }
}
```

## è§„åˆ™é…ç½®

### å‘½åçº¦æŸ

| ç±»å‹ | è§„åˆ™ | ç¤ºä¾‹ |
|------|------|------|
| Pythonæ¨¡å— | snake_case | `face_detection`, `video_pipeline` |
| Pythonç±» | PascalCase | `FaceDetector`, `VideoPipeline` |
| Pythonå‡½æ•° | snake_case | `detect_faces`, `process_video` |
| Pythonå¸¸é‡ | UPPER_SNAKE_CASE | `MAX_CONNECTIONS`, `API_VERSION` |
| é…ç½®æ–‡ä»¶ | kebab-case | `project-config.json`, `ai-config.yml` |

### ç»“æ„çº¦æŸ

- **å±‚çº§éš”ç¦»**: GUIå±‚ç¦æ­¢ç›´æ¥è°ƒç”¨ä¸šåŠ¡é€»è¾‘å’Œå¼•æ“
- **å¼•æ“è®¿é—®**: æ‰€æœ‰å¼•æ“è°ƒç”¨å¿…é¡»ç»è¿‡engine_base.py
- **æ¨¡å—èŒè´£**: æ¯ä¸ªæ¨¡å—å¿…é¡»æœ‰å•ä¸€èŒè´£
- **ç¦æ­¢å¾ªç¯ä¾èµ–**: æ¨¡å—é—´ä¾èµ–å¿…é¡»é€šè¿‡æ¥å£/æŠ½è±¡ç±»

### å®‰å…¨çº¦æŸ

- æ•æ„Ÿé…ç½®å¿…é¡»åŠ å¯†å­˜å‚¨
- APIå¯†é’¥å¿…é¡»ä½¿ç”¨ç¯å¢ƒå˜é‡
- æ‰€æœ‰APIè®¿é—®å¿…é¡»ç»è¿‡è®¤è¯
- æ‰€æœ‰å¤–éƒ¨è¾“å…¥å¿…é¡»éªŒè¯

## å¼•æ“é›†æˆ

### Deep-Live-Cam

1. å…‹éš†ä»“åº“åˆ° `backend/ar_engine/Deep-Live-Cam/`
2. å®‰è£…ä¾èµ–: `pip install -r requirements.txt`
3. ä¸‹è½½æ¨¡å‹æ–‡ä»¶åˆ° `models/`

### FaceFusion

1. å…‹éš†ä»“åº“åˆ° `backend/ar_engine/facefusion/`
2. å®‰è£…ä¾èµ–: `pip install -r requirements.txt`
3. é…ç½® `config.json`

### iRoop

1. å…‹éš†ä»“åº“åˆ° `backend/ar_engine/iRoopDeepFaceCam/`
2. é…ç½®è¿è¡Œæ—¶å‚æ•°

## æ€§èƒ½ä¼˜åŒ–

### GPUåŠ é€Ÿ

ç¡®ä¿å®‰è£…CUDAç‰ˆæœ¬çš„ä¾èµ–ï¼š

```bash
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
```

### èµ„æºç›‘æ§

ç³»ç»Ÿè‡ªåŠ¨ç›‘æ§ï¼š

- FPSå®æ—¶æ˜¾ç¤º
- GPU/CPUä½¿ç”¨ç‡
- å†…å­˜å ç”¨
- é˜Ÿåˆ—ç§¯å‹æƒ…å†µ

### è‡ªåŠ¨é™çº§

å½“æ€§èƒ½ä¸è¶³æ—¶è‡ªåŠ¨ï¼š

1. é™ä½å¤„ç†åˆ†è¾¨ç‡
2. ç¦ç”¨ç‰¹æ•ˆå¤„ç†
3. å‡å°‘æ£€æµ‹é¢‘ç‡

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å¼•æ“

1. åœ¨ `backend/ar_engine/` åˆ›å»ºå­ç›®å½•
2. å®ç° `engines/engine_base.py` å®šä¹‰çš„æ–¹æ³•
3. æ³¨å†Œåˆ° `data/rules/feature_config.json`

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨å¯¹åº”æ¨¡å—ç¼–å†™åŠŸèƒ½ä»£ç 
2. æ›´æ–° `data/rules/feature_config.json`
3. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°æ–‡æ¡£

### é…ç½®è§„åˆ™

1. ä¿®æ”¹ `data/rules/` å¯¹åº”å±‚çº§çš„é…ç½®æ–‡ä»¶
2. ç¡®ä¿ç¬¦åˆå‘½åçº¦æŸ
3. è¿è¡ŒéªŒè¯è„šæœ¬: `python scripts/validate_configs.py`

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç 
4. åˆ›å»ºPull Request

## è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## è‡´è°¢

- [Deep-Live-Cam](https://github.com/hacksider/Deep-Live-Cam)
- [FaceFusion](https://github.com/facefusion/facefusion)
- [iRoop](https://github.com/iroop/iroop)
- [Ollama](https://ollama.ai/)
- [PyQt6](https://www.riverbankcomputing.com/software/pyqt/)
- [FastAPI](https://fastapi.tiangolo.com/)

---

<p align="center">
  Built with â¤ï¸ for local AI
</p>

